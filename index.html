import React, { useState, useEffect, useRef } from 'react';
import { 
  Calculator, MapPin, Phone, Mail, Star, Users, Shield, Clock, Award, 
  ChevronRight, ArrowRight, Building, Home, Wrench, Zap, 
  CheckCircle, Menu, X, Sun, Moon, Send, Sparkles, Gift, 
  Ruler, FileText, Image, MessageCircle, Truck, 
  Calendar, Camera, Layers, Search, Palette, 
  FilePlus, Eye, RotateCcw, Download, MessageSquare,
  ChevronDown, ChevronUp, Minus, Plus, Check, Volume2,
  Mic, MicOff, Play, Pause, Globe, Target, TrendingUp,
  Share2, Percent, Crown, ShieldCheck, BarChart2,
  Radio, RadioOff, Map, ArrowUp, ArrowDown, AlertCircle,
  Sparkle, ShieldAlert, RadioTower, Headphones, 
  UserPlus, UserCheck, Smile, Zap, Rocket
} from 'lucide-react';
import { motion, AnimatePresence } from 'framer-motion';
import { Canvas } from '@react-three/fiber';
import { OrbitControls, Html, useGLTF, Environment, ContactShadows } from '@react-three/drei';
import * as THREE from 'three';

// –î–∞–Ω–Ω—ã–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–∞—à–∏—Ö –æ—Ç–≤–µ—Ç–æ–≤
const COMPANY_NAME = "–°—Ç—Ä–æ–π–ë—Ä–∏–≥–∞–¥–∞ –®—É–º–µ—Ä–ª—è";
const YEARS_OF_EXPERIENCE = 20;
const KEY_BENEFITS = [
  "–°–∞–º—ã–µ –±—ã—Å—Ç—Ä—ã–µ —Å—Ä–æ–∫–∏",
  "–ì–∞—Ä–∞–Ω—Ç–∏—è 10 –ª–µ—Ç",
  "–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥"
];
const MIN_ORDER_AMOUNT = 5000;

// –¶–µ–Ω—ã –Ω–∞ –∑–∞–±–æ—Ä—ã
const FENCE_PRICES = {
  "–¥–µ—Ä–µ–≤—è–Ω–Ω—ã–π": 1700,
  "–º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏–π": 1000,
  "–ø—Ä–æ—Ñ–Ω–∞—Å—Ç–∏–ª": 700,
  "–∫–∏—Ä–ø–∏—á–Ω—ã–π": 2800,
  "—Å–µ—Ç–∫–∞-—Ä–∞–±–∏—Ü–∞": 750,
  "–∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π": 3200
};

// –¶–µ–Ω—ã –Ω–∞ –Ω–∞–≤–µ—Å—ã
const CANOPY_PRICES = {
  "–¥–æ 10 –º¬≤": 15000,
  "10-20 –º¬≤": 50000,
  "—Å–≤—ã—à–µ 20 –º¬≤": 150000
};

// –£—Å–ª—É–≥–∏
const SERVICES = [
  {
    id: 1,
    name: "–ó–∞–±–æ—Ä—ã",
    icon: <Wrench className="w-8 h-8" />,
    description: "–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–±–æ—Ä–æ–≤ –∏–∑ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤",
    features: [
      "–î–µ—Ä–µ–≤—è–Ω–Ω—ã–µ",
      "–ú–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏–µ",
      "–ö–∏—Ä–ø–∏—á–Ω—ã–µ",
      "–ü—Ä–æ—Ñ–Ω–∞—Å—Ç–∏–ª",
      "–°–µ—Ç–∫–∞-—Ä–∞–±–∏—Ü–∞",
      "–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ"
    ],
    color: "from-blue-500 to-cyan-400"
  },
  {
    id: 2,
    name: "–ù–∞–≤–µ—Å—ã",
    icon: <Home className="w-8 h-8" />,
    description: "–ü—Ä–æ—á–Ω—ã–µ –Ω–∞–≤–µ—Å—ã –¥–ª—è –¥–∞—á–∏ –∏ –¥–æ–º–∞",
    features: [
      "–î–ª—è –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π",
      "–î–ª—è —Ç–µ—Ä—Ä–∞—Å",
      "–î–ª—è –±–µ—Å–µ–¥–æ–∫",
      "–ú–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏–µ",
      "–î–µ—Ä–µ–≤—è–Ω–Ω—ã–µ",
      "–°—Ç–µ–∫–ª—è–Ω–Ω—ã–µ"
    ],
    color: "from-green-500 to-teal-400"
  },
  {
    id: 3,
    name: "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏",
    icon: <Shield className="w-8 h-8" />,
    description: "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏ –¥–ª—è –≤–∞—à–µ–≥–æ –∫–æ–º—Ñ–æ—Ä—Ç–∞",
    features: [
      "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤–æ—Ä–æ—Ç",
      "–†–µ–º–æ–Ω—Ç –∑–∞–±–æ—Ä–æ–≤",
      "–õ–∞–Ω–¥—à–∞—Ñ—Ç–Ω—ã–π –¥–∏–∑–∞–π–Ω",
      "–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∑–∞–º–µ—Ä"
    ],
    color: "from-purple-500 to-pink-400"
  }
];

// –ì–∞–ª–µ—Ä–µ—è
const GALLERY_IMAGES = [
  'https://placehold.co/600x400/2563eb/ffffff?text=–î–µ—Ä–µ–≤—è–Ω–Ω—ã–π+–∑–∞–±–æ—Ä',
  'https://placehold.co/600x400/7c3aed/ffffff?text=–ú–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏–π+–∑–∞–±–æ—Ä',
  'https://placehold.co/600x400/059669/ffffff?text=–ö–∏—Ä–ø–∏—á–Ω—ã–π+–∑–∞–±–æ—Ä',
  'https://placehold.co/600x400/dc2626/ffffff?text=–ü—Ä–æ—Ñ–Ω–∞—Å—Ç–∏–ª+–∑–∞–±–æ—Ä',
  'https://placehold.co/600x400/ea580c/ffffff?text=–ù–∞–≤–µ—Å+–¥–ª—è+–∞–≤—Ç–æ–º–æ–±–∏–ª—è',
  'https://placehold.co/600x400/0891b2/ffffff?text=–ù–∞–≤–µ—Å+–¥–ª—è+–±–µ—Å–µ–¥–∫–∏'
];

// –û—Ç–∑—ã–≤—ã
const TESTIMONIALS = [
  {
    name: '–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ü–µ—Ç—Ä–æ–≤',
    text: '–ó–∞–∫–∞–∑—ã–≤–∞–ª –∑–∞–±–æ—Ä –∏–∑ –ø—Ä–æ—Ñ–Ω–∞—Å—Ç–∏–ª–∞. –†–µ–±—è—Ç–∞ –ø—Ä–∏–µ—Ö–∞–ª–∏ –≤ —Ç–æ—Ç –∂–µ –¥–µ–Ω—å, —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ –∑–∞ 2 –¥–Ω—è. –ö–∞—á–µ—Å—Ç–≤–æ –Ω–∞ –≤—ã—Å–æ—Ç–µ! –ì–∞—Ä–∞–Ω—Ç–∏—é –¥–∞–ª–∏ 10 –ª–µ—Ç. –†–µ–∫–æ–º–µ–Ω–¥—É—é!',
    rating: 5,
    avatar: 'https://placehold.co/60x60/3b82f6/ffffff?text=–ê–ü',
    verified: true
  },
  {
    name: '–ú–∞—Ä–∏—è –ò–≤–∞–Ω–æ–≤–∞',
    text: '–°–¥–µ–ª–∞–ª–∏ –Ω–∞–≤–µ—Å –¥–ª—è –∞–≤—Ç–æ–º–æ–±–∏–ª—è –∑–∞ 3 –¥–Ω—è. –û—á–µ–Ω—å –¥–æ–≤–æ–ª–µ–Ω —Å—Ä–æ–∫–∞–º–∏ –∏ –∫–∞—á–µ—Å—Ç–≤–æ–º. –û—Ç–¥–µ–ª—å–Ω–æ–µ —Å–ø–∞—Å–∏–±–æ –∑–∞ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∑–∞–º–µ—Ä. –¢–µ–ø–µ—Ä—å –≤—Å–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥—É—é!',
    rating: 5,
    avatar: 'https://placehold.co/60x60/ef4444/ffffff?text=–ú–ò',
    verified: true
  },
  {
    name: '–î–º–∏—Ç—Ä–∏–π –°–∏–¥–æ—Ä–æ–≤',
    text: '–†–µ–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–ª–∏ —Å—Ç–∞—Ä—ã–π –¥–µ—Ä–µ–≤—è–Ω–Ω—ã–π –∑–∞–±–æ—Ä. –†–∞–±–æ—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ –∏ –±—ã—Å—Ç—Ä–æ. –¶–µ–Ω—ã –∞–¥–µ–∫–≤–∞—Ç–Ω—ã–µ. –¢–µ–ø–µ—Ä—å –∑–Ω–∞—é, –∫ –∫–æ–º—É –æ–±—Ä–∞—â–∞—Ç—å—Å—è!',
    rating: 5,
    avatar: 'https://placehold.co/60x60/10b981/ffffff?text=–î–°',
    verified: false
  },
  {
    name: '–ï–ª–µ–Ω–∞ –ö—É–∑–Ω–µ—Ü–æ–≤–∞',
    text: '–ó–∞–∫–∞–∑—ã–≤–∞–ª–∏ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–∞–±–æ—Ä —Å –∫–∏—Ä–ø–∏—á–Ω—ã–º–∏ —Å—Ç–æ–ª–±–∞–º–∏. –ü–æ–ª—É—á–∏–ª–æ—Å—å –æ—á–µ–Ω—å —Å—Ç–∏–ª—å–Ω–æ –∏ –Ω–∞–¥–µ–∂–Ω–æ. –ì–∞—Ä–∞–Ω—Ç–∏—è 10 –ª–µ—Ç –¥–∞–µ—Ç —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å. –°–ø–∞—Å–∏–±–æ –∑–∞ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥!',
    rating: 5,
    avatar: 'https://placehold.co/60x60/8b5cf6/ffffff?text=–ï–ö',
    verified: true
  }
];

// –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
const ADDITIONAL_FEATURES = [
  {
    icon: <Calendar className="w-6 h-6" />,
    title: "–ö–∞–ª–µ–Ω–¥–∞—Ä—å –∑–∞–º–µ—Ä–æ–≤",
    description: "–í—ã–±–µ—Ä–∏—Ç–µ —É–¥–æ–±–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ –∑–∞–º–µ—Ä–∞"
  },
  {
    icon: <Layers className="w-6 h-6" />,
    title: "–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤",
    description: "–°—Ä–∞–≤–Ω–∏—Ç–µ –≤—Å–µ —Ç–∏–ø—ã –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –∏ –≤—ã–±–µ—Ä–∏—Ç–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç"
  },
  {
    icon: <RotateCcw className="w-6 h-6" />,
    title: "3D-–ø—Ä–µ–≤—å—é",
    description: "–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ, –∫–∞–∫ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –≤–∞—à –∑–∞–±–æ—Ä –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö"
  },
  {
    icon: <Truck className="w-6 h-6" />,
    title: "–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞",
    description: "–°–ª–µ–¥–∏—Ç–µ –∑–∞ —Å—Ç–∞—Ç—É—Å–æ–º –≤–∞—à–µ–≥–æ –∑–∞–∫–∞–∑–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏"
  },
  {
    icon: <Search className="w-6 h-6" />,
    title: "–ü–æ–¥–±–æ—Ä –º–∞—Ç–µ—Ä–∏–∞–ª–∞",
    description: "–û—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –ø–æ–ª—É—á–∏—Ç–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é"
  },
  {
    icon: <MessageCircle className="w-6 h-6" />,
    title: "–ß–∞—Ç —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º",
    description: "–ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å—ã –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏"
  },
  {
    icon: <Download className="w-6 h-6" />,
    title: "–°–∫–∞—á–∞—Ç—å –ø—Ä–æ–µ–∫—Ç",
    description: "–ü–æ–ª—É—á–∏—Ç–µ 3D-–º–æ–¥–µ–ª—å –≤–∞—à–µ–≥–æ –±—É–¥—É—â–µ–≥–æ –∑–∞–±–æ—Ä–∞"
  }
];

// –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è (–ø—Ä–∏–¥—É–º–∞–Ω–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–∞—à–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞)
const SPECIAL_OFFERS = [
  {
    id: 1,
    title: "–°—É–ø–µ—Ä-–∞–∫—Ü–∏—è!",
    description: "–ó–∞–∫–∞–∂–∏—Ç–µ –∑–∞–±–æ—Ä –¥–æ –∫–æ–Ω—Ü–∞ –º–µ—Å—è—Ü–∞ –∏ –ø–æ–ª—É—á–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É –≤–æ—Ä–æ—Ç –ë–ï–°–ü–õ–ê–¢–ù–û!",
    badge: "–°–∫–∏–¥–∫–∞ 20%",
    color: "bg-red-100 text-red-800",
    icon: <Gift className="w-6 h-6 text-red-500" />
  },
  {
    id: 2,
    title: "–ü—Ä–æ–≥—Ä–∞–º–º–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏",
    description: "–ù–∞–∫–∞–ø–ª–∏–≤–∞–π—Ç–µ –±–∞–ª–ª—ã –∑–∞ –∫–∞–∂–¥—ã–π –∑–∞–∫–∞–∑ –∏ –ø–æ–ª—É—á–∞–π—Ç–µ —Å–∫–∏–¥–∫–∏ –¥–æ 15%!",
    badge: "–ù–æ–≤—ã–π",
    color: "bg-blue-100 text-blue-800",
    icon: <Crown className="w-6 h-6 text-yellow-500" />
  },
  {
    id: 3,
    title: "–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞",
    description: "–ü—Ä–∏–≤–µ–¥–∏—Ç–µ –¥—Ä—É–≥–∞ ‚Äî –ø–æ–ª—É—á–∏—Ç–µ 10% —Å–∫–∏–¥–∫—É –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –∑–∞–∫–∞–∑!",
    badge: "–ê–∫—Ü–∏—è",
    color: "bg-green-100 text-green-800",
    icon: <Share2 className="w-6 h-6 text-green-500" />
  }
];

// –í–æ–ø—Ä–æ—Å—ã –¥–ª—è —Ç–µ—Å—Ç–∞ "–ö–∞–∫–æ–π –∑–∞–±–æ—Ä –≤–∞–º –ø–æ–¥—Ö–æ–¥–∏—Ç?"
const QUIZ_QUESTIONS = [
  {
    id: 1,
    question: "–ö–∞–∫–æ–π —É –≤–∞—Å –±—é–¥–∂–µ—Ç –Ω–∞ –∑–∞–±–æ—Ä?",
    options: [
      { id: "low", text: "–î–æ 50 000 ‚ÇΩ", description: "–≠–∫–æ–Ω–æ–º –≤–∞—Ä–∏–∞–Ω—Ç", priceRange: "700-1500 ‚ÇΩ/–º" },
      { id: "medium", text: "50 000 - 100 000 ‚ÇΩ", description: "–°—Ä–µ–¥–Ω–∏–π –∫–ª–∞—Å—Å", priceRange: "1500-2500 ‚ÇΩ/–º" },
      { id: "high", text: "–°–≤—ã—à–µ 100 000 ‚ÇΩ", description: "–ü—Ä–µ–º–∏—É–º –∫–ª–∞—Å—Å", priceRange: "2500-3200 ‚ÇΩ/–º" }
    ]
  },
  {
    id: 2,
    question: "–ö–∞–∫–∏–µ —É –≤–∞—Å —Ü–µ–ª–∏?",
    options: [
      { id: "privacy", text: "–û–±–µ—Å–ø–µ—á–∏—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å", description: "–ù—É–∂–µ–Ω –≤—ã—Å–æ–∫–∏–π –≥–ª—É—Ö–æ–π –∑–∞–±–æ—Ä" },
      { id: "decoration", text: "–£–∫—Ä–∞—Å–∏—Ç—å —É—á–∞—Å—Ç–æ–∫", description: "–ü–æ–¥–æ–π–¥–µ—Ç –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–π –∑–∞–±–æ—Ä" },
      { id: "protection", text: "–ó–∞—â–∏—Ç–∏—Ç—å –æ—Ç –≤–µ—Ç—Ä–∞ –∏ –ø—ã–ª–∏", description: "–ù—É–∂–µ–Ω –ø–ª–æ—Ç–Ω—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª" }
    ]
  },
  {
    id: 3,
    question: "–ö–∞–∫–æ–π —Å—Ç–∏–ª—å —É—á–∞—Å—Ç–∫–∞?",
    options: [
      { id: "modern", text: "–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π", description: "–ú–µ—Ç–∞–ª–ª, —Å—Ç–µ–∫–ª–æ, –º–∏–Ω–∏–º–∞–ª–∏–∑–º" },
      { id: "classic", text: "–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π", description: "–ö–∏—Ä–ø–∏—á, –¥–µ—Ä–µ–≤–æ, —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã" },
      { id: "rustic", text: "–†—É—Å—Ç–∏–∫", description: "–î–µ—Ä–µ–≤–æ, –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã" }
    ]
  },
  {
    id: 4,
    question: "–ö–∞–∫–æ–π —Å—Ä–æ–∫ —Å–ª—É–∂–±—ã –≤–∞–∂–µ–Ω?",
    options: [
      { id: "short", text: "–î–æ 5 –ª–µ—Ç", description: "–í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è" },
      { id: "medium", text: "5-10 –ª–µ—Ç", description: "–°—Ä–µ–¥–Ω–∏–π —Å—Ä–æ–∫ —Å–ª—É–∂–±—ã" },
      { id: "long", text: "–°–≤—ã—à–µ 10 –ª–µ—Ç", description: "–î–æ–ª–≥–æ–≤–µ—á–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã" }
    ]
  }
];

// –ü—Ä–æ–≥–Ω–æ–∑ —Ü–µ–Ω –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
const PRICE_FORECAST = [
  { month: "–°–µ–Ω—Ç—è–±—Ä—å", fence: 700, canopy: 15000 },
  { month: "–û–∫—Ç—è–±—Ä—å", fence: 720, canopy: 15500 },
  { month: "–ù–æ—è–±—Ä—å", fence: 740, canopy: 16000 },
  { month: "–î–µ–∫–∞–±—Ä—å", fence: 760, canopy: 16500 },
  { month: "–Ø–Ω–≤–∞—Ä—å", fence: 780, canopy: 17000 },
  { month: "–§–µ–≤—Ä–∞–ª—å", fence: 800, canopy: 17500 }
];

const App = () => {
  const [activeTab, setActiveTab] = useState('home');
  const [showMenu, setShowMenu] = useState(false);
  const [isDarkMode, setIsDarkMode] = useState(false);
  const [currentImageIndex, setCurrentImageIndex] = useState(0);
  const [formData, setFormData] = useState({
    name: '',
    phone: '',
    service: '',
    message: '',
    fenceType: '',
    fenceLength: '',
    canopySize: '',
    appointmentDate: '',
    appointmentTime: '',
    sitePhoto: null
  });
  const [formErrors, setFormErrors] = useState({});
  const [isFormSubmitted, setIsFormSubmitted] = useState(false);
  const [isCalculatorOpen, setIsCalculatorOpen] = useState(true);
  const [isAppointmentOpen, setIsAppointmentOpen] = useState(false);
  const [isChatOpen, setIsChatOpen] = useState(false);
  const [selectedFenceType, setSelectedFenceType] = useState('');
  const [selectedCanopyType, setSelectedCanopyType] = useState('');
  const [chatMessages, setChatMessages] = useState([
    { sender: 'bot', text: '–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –Ø –≤–∞—à –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫. –ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?' }
  ]);
  const [newMessage, setNewMessage] = useState('');
  const [isChatTyping, setIsChatTyping] = useState(false);
  const [threeDView, setThreeDView] = useState('fence');
  const [fenceConfig, setFenceConfig] = useState({
    type: '–¥–µ—Ä–µ–≤—è–Ω–Ω—ã–π',
    height: 2,
    length: 10,
    gates: false,
    color: '#8B4513'
  });
  const [loyaltyPoints, setLoyaltyPoints] = useState(150);
  const [referralCode, setReferralCode] = useState('STROY123');
  const [quizStep, setQuizStep] = useState(0);
  const [quizAnswers, setQuizAnswers] = useState({});
  const [quizResult, setQuizResult] = useState(null);
  const [isVoiceActive, setIsVoiceActive] = useState(false);
  const [voiceTranscript, setVoiceTranscript] = useState('');
  const [isARActive, setIsARActive] = useState(false);
  const [isARSupported, setIsARSupported] = useState(false);
  const [isARLoading, setIsARLoading] = useState(false);
  const [isVirtualTourActive, setIsVirtualTourActive] = useState(false);
  const [currentTourIndex, setCurrentTourIndex] = useState(0);
  const [isPriceForecastVisible, setIsPriceForecastVisible] = useState(false);
  const [loyaltyProgramOpen, setLoyaltyProgramOpen] = useState(false);
  const [referralProgramOpen, setReferralProgramOpen] = useState(false);
  const [supermanAnimation, setSupermanAnimation] = useState(false);
  const [currentOfferIndex, setCurrentOfferIndex] = useState(0);
  
  // –î–ª—è –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –ø–æ–º–æ—â–Ω–∏–∫–∞
  const recognitionRef = useRef(null);
  const voiceTimerRef = useRef(null);
  
  // –ê–≤—Ç–æ-–ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –≥–∞–ª–µ—Ä–µ–∏
  useEffect(() => {
    const interval = setInterval(() => {
      setCurrentImageIndex((prev) => (prev + 1) % GALLERY_IMAGES.length);
    }, 5000);
    return () => clearInterval(interval);
  }, []);
  
  // –ê–≤—Ç–æ-–ø—Ä–æ–∫—Ä—É—Ç–∫–∞ —Å–ø–µ—Ü–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
  useEffect(() => {
    const offerInterval = setInterval(() => {
      setCurrentOfferIndex((prev) => (prev + 1) % SPECIAL_OFFERS.length);
    }, 8000);
    return () => clearInterval(offerInterval);
  }, []);
  
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ AR
  useEffect(() => {
    const checkARSupport = async () => {
      try {
        // –ü—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ –Ω—É–∂–Ω–∞ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞)
        setIsARSupported(true);
      } catch (error) {
        setIsARSupported(false);
      }
    };
    
    checkARSupport();
  }, []);
  
  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –ø–æ–º–æ—â–Ω–∏–∫–∞
  useEffect(() => {
    if (typeof window !== 'undefined' && 'webkitSpeechRecognition' in window) {
      const SpeechRecognition = window.webkitSpeechRecognition || window.SpeechRecognition;
      recognitionRef.current = new SpeechRecognition();
      recognitionRef.current.continuous = false;
      recognitionRef.current.interimResults = false;
      recognitionRef.current.lang = 'ru-RU';
      
      recognitionRef.current.onresult = (event) => {
        const transcript = event.results[0][0].transcript;
        setVoiceTranscript(transcript);
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥
        handleVoiceCommand(transcript);
      };
      
      recognitionRef.current.onerror = (event) => {
        console.error('Speech recognition error', event.error);
        setIsVoiceActive(false);
      };
      
      recognitionRef.current.onend = () => {
        setIsVoiceActive(false);
      };
    } else {
      console.log('Web Speech API not supported');
    }
    
    return () => {
      if (recognitionRef.current) {
        recognitionRef.current.stop();
      }
      if (voiceTimerRef.current) {
        clearTimeout(voiceTimerRef.current);
      }
    };
  }, []);
  
  // –ò–º–∏—Ç–∞—Ü–∏—è –Ω–∞–±–æ—Ä–∞ —Ç–µ–∫—Å—Ç–∞ –≤ —á–∞—Ç–µ
  useEffect(() => {
    if (isChatTyping) {
      const timer = setTimeout(() => {
        setChatMessages(prev => [
          ...prev,
          { sender: 'bot', text: '–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ! –ù–∞—à –º–µ–Ω–µ–¥–∂–µ—Ä —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.' }
        ]);
        setIsChatTyping(false);
      }, 1500);
      return () => clearTimeout(timer);
    }
  }, [isChatTyping]);
  
  // –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã
  const validateForm = () => {
    let errors = {};
    if (!formData.name) errors.name = '–ü–æ–ª–µ "–ò–º—è" –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ';
    if (!formData.phone) errors.phone = '–ü–æ–ª–µ "–¢–µ–ª–µ—Ñ–æ–Ω" –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ';
    if (!formData.service && !formData.fenceType && !formData.canopySize) errors.service = '–í—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª—É–≥—É';
    return errors;
  };
  
  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–æ—Ä–º—ã
  const handleInputChange = (e) => {
    const { name, value } = e.target;
    setFormData({ ...formData, [name]: value });
  };
  
  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ
  const handleFileUpload = (e) => {
    const file = e.target.files[0];
    if (file && file.size <= 10 * 1024 * 1024) { // 10MB limit
      setFormData({ ...formData, sitePhoto: file });
    } else {
      alert('–§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä ‚Äî 10MB.');
    }
  };
  
  // –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º—ã
  const handleSubmit = async (e) => {
    e.preventDefault();
    const errors = validateForm();
    setFormErrors(errors);
    
    if (Object.keys(errors).length === 0) {
      try {
        // –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram
        const telegramBotToken = '7652376591:AAGbGzcwwpIyN91fLtX2KAW0KM_qQ07RUXs';
        const chatId = '5977892192';
        
        const message = `
üß© –ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ —Å —Å–∞–π—Ç–∞!
üë§ –ò–º—è: ${formData.name}
üìû –¢–µ–ª–µ—Ñ–æ–Ω: ${formData.phone}
üõ† –£—Å–ª—É–≥–∞: ${formData.service || formData.fenceType || formData.canopySize}
üìù –°–æ–æ–±—â–µ–Ω–∏–µ: ${formData.message}
üìç –¢–∏–ø –∑–∞–±–æ—Ä–∞: ${formData.fenceType}
üìè –î–ª–∏–Ω–∞ –∑–∞–±–æ—Ä–∞: ${formData.fenceLength} –º
üìê –†–∞–∑–º–µ—Ä –Ω–∞–≤–µ—Å–∞: ${formData.canopySize}
üìÖ –î–∞—Ç–∞ –∑–∞–º–µ—Ä–∞: ${formData.appointmentDate}
‚è∞ –í—Ä–µ–º—è –∑–∞–º–µ—Ä–∞: ${formData.appointmentTime}
üìç –ì–æ—Ä–æ–¥: –®—É–º–µ—Ä–ª—è
        `;
        
        await fetch(`https://api.telegram.org/bot${telegramBotToken}/sendMessage`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            chat_id: chatId,
            text: message
          })
        });
        
        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –±–∞–ª–ª–æ–≤ –≤ –ø—Ä–æ–≥—Ä–∞–º–º—É –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏
        setLoyaltyPoints(prev => prev + 50);
        
        setIsFormSubmitted(true);
        setTimeout(() => {
          setIsFormSubmitted(false);
          setFormData({
            name: '',
            phone: '',
            service: '',
            message: '',
            fenceType: '',
            fenceLength: '',
            canopySize: '',
            appointmentDate: '',
            appointmentTime: '',
            sitePhoto: null
          });
        }, 3000);
      } catch (error) {
        console.error('Error sending to Telegram:', error);
        alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞—è–≤–∫–∏. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.');
      }
    }
  };
  
  // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç
  const handleSendMessage = () => {
    if (newMessage.trim() === '') return;
    
    setChatMessages(prev => [
      ...prev,
      { sender: 'user', text: newMessage }
    ]);
    
    setNewMessage('');
    setIsChatTyping(true);
  };
  
  // –†–∞—Å—Å—á–µ—Ç —Ü–µ–Ω—ã
  const calculatePrice = () => {
    let totalPrice = 0;
    
    // –¶–µ–Ω–∞ –∑–∞–±–æ—Ä–∞
    if (formData.fenceType && formData.fenceLength) {
      const pricePerMeter = FENCE_PRICES[formData.fenceType.toLowerCase()] || 0;
      totalPrice += pricePerMeter * parseFloat(formData.fenceLength);
    }
    
    // –¶–µ–Ω–∞ –Ω–∞–≤–µ—Å–∞
    if (formData.canopySize) {
      const canopySize = formData.canopySize.toLowerCase();
      if (CANOPY_PRICES[canopySize]) {
        totalPrice += CANOPY_PRICES[canopySize];
      }
    }
    
    return totalPrice;
  };
  
  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≥–æ–ª–æ—Å–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥
  const handleVoiceCommand = (transcript) => {
    const lowerTranscript = transcript.toLowerCase();
    
    if (lowerTranscript.includes('–∑–∞–±–æ—Ä')) {
      setActiveTab('services');
      setChatMessages(prev => [
        ...prev,
        { sender: 'bot', text: '–ü–µ—Ä–µ–∫–ª—é—á–∞—é –Ω–∞ —Ä–∞–∑–¥–µ–ª "–ó–∞–±–æ—Ä—ã". –ß—Ç–æ –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç?' }
      ]);
    } else if (lowerTranscript.includes('–Ω–∞–≤–µ—Å')) {
      setActiveTab('services');
      setChatMessages(prev => [
        ...prev,
        { sender: 'bot', text: '–ü–µ—Ä–µ–∫–ª—é—á–∞—é –Ω–∞ —Ä–∞–∑–¥–µ–ª "–ù–∞–≤–µ—Å—ã". –ö–∞–∫–æ–π —Ç–∏–ø –Ω–∞–≤–µ—Å–∞ –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç?' }
      ]);
    } else if (lowerTranscript.includes('–∫–æ–Ω—Ç–∞–∫—Ç—ã') || lowerTranscript.includes('—Ç–µ–ª–µ—Ñ–æ–Ω')) {
      setActiveTab('contact');
      setChatMessages(prev => [
        ...prev,
        { sender: 'bot', text: '–ü–µ—Ä–µ–∫–ª—é—á–∞—é –Ω–∞ —Ä–∞–∑–¥–µ–ª "–ö–æ–Ω—Ç–∞–∫—Ç—ã". –í–æ—Ç –Ω–∞—à–∏ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ...' }
      ]);
    } else if (lowerTranscript.includes('–∑–∞–∫–∞–∑') || lowerTranscript.includes('–∑–∞—è–≤–∫–∞')) {
      setActiveTab('contact');
      setChatMessages(prev => [
        ...prev,
        { sender: 'bot', text: '–ü–µ—Ä–µ–∫–ª—é—á–∞—é –Ω–∞ —Ñ–æ—Ä–º—É –∑–∞—è–≤–∫–∏. –ì–æ—Ç–æ–≤—ã –æ—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑?' }
      ]);
    } else if (lowerTranscript.includes('–ø–æ–º–æ—â—å') || lowerTranscript.includes('–ø–æ–º–æ–≥–∏')) {
      setChatMessages(prev => [
        ...prev,
        { sender: 'bot', text: '–Ø –º–æ–≥—É –ø–æ–º–æ—á—å –≤–∞–º –≤—ã–±—Ä–∞—Ç—å –ø–æ–¥—Ö–æ–¥—è—â–∏–π —Ç–∏–ø –∑–∞–±–æ—Ä–∞, —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å –∏–ª–∏ –∑–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∑–∞–º–µ—Ä. –ß—Ç–æ –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç?' }
      ]);
    } else {
      setChatMessages(prev => [
        ...prev,
        { sender: 'bot', text: '–ò–∑–≤–∏–Ω–∏—Ç–µ, —è –Ω–µ –ø–æ–Ω—è–ª –≤–∞—à –∑–∞–ø—Ä–æ—Å. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –∏–ª–∏ –∑–∞–¥–∞–π—Ç–µ –¥—Ä—É–≥–æ–π –≤–æ–ø—Ä–æ—Å.' }
      ]);
    }
  };
  
  // –ó–∞–ø—É—Å–∫/–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –ø–æ–º–æ—â–Ω–∏–∫–∞
  const toggleVoiceAssistant = () => {
    if (!recognitionRef.current) {
      alert('–í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≥–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Chrome.');
      return;
    }
    
    if (isVoiceActive) {
      recognitionRef.current.stop();
      setIsVoiceActive(false);
      setVoiceTranscript('');
    } else {
      recognitionRef.current.start();
      setIsVoiceActive(true);
      
      // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
      voiceTimerRef.current = setTimeout(() => {
        if (isVoiceActive) {
          recognitionRef.current.stop();
          setIsVoiceActive(false);
        }
      }, 5000);
    }
  };
  
  // –ó–∞–ø—É—Å–∫ AR-–ø—Ä–µ–≤—å—é
  const startARPreview = () => {
    if (!isARSupported) {
      alert('AR –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ —Å iOS 11+ –∏–ª–∏ Android 8.0+');
      return;
    }
    
    setIsARLoading(true);
    setIsARActive(true);
    
    // –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ AR
    setTimeout(() => {
      setIsARLoading(false);
      setSupermanAnimation(true);
      
      // –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è
      setTimeout(() => {
        setSupermanAnimation(false);
      }, 3000);
    }, 1500);
  };
  
  // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ AR-–ø—Ä–µ–≤—å—é
  const stopARPreview = () => {
    setIsARActive(false);
    setIsARLoading(false);
  };
  
  // –ó–∞–ø—É—Å–∫ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Ç—É—Ä–∞
  const startVirtualTour = () => {
    setIsVirtualTourActive(true);
    setCurrentTourIndex(0);
    
    // –ê–≤—Ç–æ-–ø—Ä–æ–∫—Ä—É—Ç–∫–∞ —Ç—É—Ä–∞
    const tourInterval = setInterval(() => {
      setCurrentTourIndex(prev => (prev + 1) % GALLERY_IMAGES.length);
    }, 5000);
    
    // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ 30 —Å–µ–∫—É–Ω–¥
    setTimeout(() => {
      clearInterval(tourInterval);
      setIsVirtualTourActive(false);
    }, 30000);
  };
  
  // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ—Å—Ç–∞ "–ö–∞–∫–æ–π –∑–∞–±–æ—Ä –≤–∞–º –ø–æ–¥—Ö–æ–¥–∏—Ç?"
  const handleQuizAnswer = (optionId) => {
    setQuizAnswers({
      ...quizAnswers,
      [QUIZ_QUESTIONS[quizStep].id]: optionId
    });
    
    if (quizStep < QUIZ_QUESTIONS.length - 1) {
      setQuizStep(quizStep + 1);
    } else {
      // –†–∞—Å—á–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
      calculateQuizResult();
    }
  };
  
  // –†–∞—Å—á–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Ç–µ—Å—Ç–∞
  const calculateQuizResult = () => {
    const { 1: budget, 2: goal, 3: style, 4: durability } = quizAnswers;
    
    let recommendedFence = '';
    let priceRange = '';
    let description = '';
    
    // –ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
    if (budget === 'low') {
      recommendedFence = '–ü—Ä–æ—Ñ–Ω–∞—Å—Ç–∏–ª';
      priceRange = '700-1500 ‚ÇΩ/–º';
      description = '–≠–∫–æ–Ω–æ–º–∏—á–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç —Å —Ö–æ—Ä–æ—à–µ–π –¥–æ–ª–≥–æ–≤–µ—á–Ω–æ—Å—Ç—å—é';
    } else if (budget === 'medium') {
      if (style === 'modern') {
        recommendedFence = '–ú–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏–π —Å –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏';
        priceRange = '1500-2500 ‚ÇΩ/–º';
        description = '–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω —Å —Ö–æ—Ä–æ—à–µ–π –∑–∞—â–∏—Ç–æ–π';
      } else {
        recommendedFence = '–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π';
        priceRange = '1500-2500 ‚ÇΩ/–º';
        description = '–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —É—á–∞—Å—Ç–∫–æ–≤';
      }
    } else {
      if (style === 'classic') {
        recommendedFence = '–ö–∏—Ä–ø–∏—á–Ω—ã–π —Å –º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏–º–∏ –≤—Å—Ç–∞–≤–∫–∞–º–∏';
        priceRange = '2500-3200 ‚ÇΩ/–º';
        description = '–ü—Ä–µ–º–∏—É–º —Ä–µ—à–µ–Ω–∏–µ —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –¥–æ–ª–≥–æ–≤–µ—á–Ω–æ—Å—Ç—å—é';
      } else {
        recommendedFence = '–î–µ—Ä–µ–≤—è–Ω–Ω—ã–π —Å –º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏–º –∫–∞—Ä–∫–∞—Å–æ–º';
        priceRange = '2500-3200 ‚ÇΩ/–º';
        description = '–≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω —Å –≥–∞—Ä–∞–Ω—Ç–∏–µ–π 10 –ª–µ—Ç';
      }
    }
    
    setQuizResult({
      fence: recommendedFence,
      priceRange,
      description,
      image: GALLERY_IMAGES[Math.floor(Math.random() * GALLERY_IMAGES.length)]
    });
  };
  
  // 3D –º–æ–¥–µ–ª—å –∑–∞–±–æ—Ä–∞
  const FenceModel = () => (
    <group>
      {/* –û—Å–Ω–æ–≤–∞–Ω–∏–µ –∑–∞–±–æ—Ä–∞ */}
      <mesh position={[0, 0, 0]}>
        <boxGeometry args={[fenceConfig.length, 0.1, 0.3]} />
        <meshStandardMaterial color="#8B4513" />
      </mesh>
      
      {/* –°—Ç–æ–ª–±—ã */}
      {Array.from({ length: Math.floor(fenceConfig.length / 2) + 1 }).map((_, i) => (
        <mesh key={i} position={[i * 2 - fenceConfig.length / 2 + 1, fenceConfig.height / 2, 0]}>
          <boxGeometry args={[0.2, fenceConfig.height, 0.3]} />
          <meshStandardMaterial color={fenceConfig.color} />
        </mesh>
      ))}
      
      {/* –ü–∞–Ω–µ–ª–∏ */}
      {Array.from({ length: Math.floor(fenceConfig.length) }).map((_, i) => (
        <mesh key={i} position={[i - fenceConfig.length / 2 + 0.5, fenceConfig.height / 2 - 0.1, 0]}>
          <boxGeometry args={[1, fenceConfig.height - 0.2, 0.05]} />
          <meshStandardMaterial color={fenceConfig.color} />
        </mesh>
      ))}
      
      {/* –í–æ—Ä–æ—Ç–∞ (–µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω—ã) */}
      {fenceConfig.gates && (
        <group position={[fenceConfig.length / 2 - 1, fenceConfig.height / 2, 0]}>
          <mesh>
            <boxGeometry args={[1.5, fenceConfig.height - 0.2, 0.1]} />
            <meshStandardMaterial color="#A9A9A9" />
          </mesh>
        </group>
      )}
      
      {/* –î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è –°—É–ø–µ—Ä–º–µ–Ω–∞ */}
      {supermanAnimation && (
        <group>
          <mesh position={[fenceConfig.length / 2 + 1.5, fenceConfig.height + 1, 0]}>
            <coneGeometry args={[0.5, 1, 4]} />
            <meshStandardMaterial color="#FF0000" />
          </mesh>
          <mesh position={[fenceConfig.length / 2 + 1.5, fenceConfig.height + 0.5, 0]}>
            <cylinderGeometry args={[0.3, 0.3, 0.5, 8]} />
            <meshStandardMaterial color="#0000FF" />
          </mesh>
        </group>
      )}
    </group>
  );
  
  // 3D –º–æ–¥–µ–ª—å –Ω–∞–≤–µ—Å–∞
  const CanopyModel = () => (
    <group>
      {/* –û–ø–æ—Ä—ã */}
      <mesh position={[-2, 1.5, 0]}>
        <boxGeometry args={[0.3, 3, 0.3]} />
        <meshStandardMaterial color="#A9A9A9" />
      </mesh>
      <mesh position={[2, 1.5, 0]}>
        <boxGeometry args={[0.3, 3, 0.3]} />
        <meshStandardMaterial color="#A9A9A9" />
      </mesh>
      
      {/* –ö—Ä—ã—à–∞ */}
      <mesh position={[0, 3, 0]}>
        <boxGeometry args={[5, 0.2, 3]} />
        <meshStandardMaterial color="#FFD700" />
      </mesh>
      
      {/* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã */}
      <mesh position={[0, 3.1, 0]}>
        <boxGeometry args={[4.5, 0.1, 2.5]} />
        <meshStandardMaterial color="#8B4513" />
      </mesh>
      
      {/* –°–∏–º–≤–æ–ª –°—É–ø–µ—Ä–º–µ–Ω–∞ */}
      {supermanAnimation && (
        <mesh position={[0, 3.5, 0.15]}>
          <textGeometry
            args={['S', { font: 'helvetiker', size: 0.5, height: 0.1 }]}
          />
          <meshStandardMaterial color="#FF0000" />
        </mesh>
      )}
    </group>
  );
  
  // AR-–ø—Ä–µ–≤—å—é (—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
  const ARPreview = () => (
    <div className="relative w-full h-96 bg-gray-100 dark:bg-gray-800 rounded-xl overflow-hidden">
      {isARLoading ? (
        <div className="w-full h-full flex flex-col items-center justify-center">
          <div className="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mb-4"></div>
          <p className="text-gray-600 dark:text-gray-300">–ó–∞–≥—Ä—É–∑–∫–∞ AR-–º–æ–¥–µ–ª–∏...</p>
        </div>
      ) : (
        <>
          <div className="absolute inset-0 bg-[url('https://placehold.co/800x600/2563eb/ffffff?text=–í–∞—à+—É—á–∞—Å—Ç–æ–∫')] bg-cover opacity-20"></div>
          <div className="absolute inset-0 flex items-center justify-center">
            <div className="bg-white/80 dark:bg-gray-800/80 p-6 rounded-xl max-w-md text-center">
              <h3 className="text-xl font-bold mb-2">AR-–ø—Ä–µ–≤—å—é –∑–∞–±–æ—Ä–∞</h3>
              <p className="mb-4">–ù–∞–≤–µ–¥–∏—Ç–µ –∫–∞–º–µ—Ä—É –Ω–∞ —Å–≤–æ–π —É—á–∞—Å—Ç–æ–∫, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å, –∫–∞–∫ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –∑–∞–±–æ—Ä.</p>
              <div className="flex justify-center space-x-4">
                <button
                  onClick={stopARPreview}
                  className="bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white px-4 py-2 rounded-lg"
                >
                  –û—Ç–º–µ–Ω–∞
                </button>
                <button
                  className="bg-blue-600 text-white px-4 py-2 rounded-lg"
                >
                  –°–¥–µ–ª–∞—Ç—å —Ñ–æ—Ç–æ
                </button>
              </div>
            </div>
          </div>
        </>
      )}
    </div>
  );
  
  // –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Ç—É—Ä
  const VirtualTour = () => (
    <div className="relative w-full h-96 bg-gray-100 dark:bg-gray-800 rounded-xl overflow-hidden">
      <img 
        src={GALLERY_IMAGES[currentTourIndex]} 
        alt={`–¢—É—Ä ${currentTourIndex + 1}`} 
        className="w-full h-full object-cover transition-opacity duration-1000"
      />
      <div className="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent flex items-end justify-center pb-6">
        <span className="text-white text-lg font-semibold">–û–±—ä–µ–∫—Ç #{currentTourIndex + 1}</span>
      </div>
      <div className="absolute top-4 right-4 bg-black/50 text-white px-3 py-1 rounded-lg">
        {currentTourIndex + 1} / {GALLERY_IMAGES.length}
      </div>
      <div className="absolute inset-0 flex items-center justify-between px-4">
        <button
          onClick={() => setCurrentTourIndex((prev) => (prev - 1 + GALLERY_IMAGES.length) % GALLERY_IMAGES.length)}
          className="bg-black/50 text-white p-2 rounded-full hover:bg-black/70"
        >
          <ChevronLeft className="w-6 h-6" />
        </button>
        <button
          onClick={() => setCurrentTourIndex((prev) => (prev + 1) % GALLERY_IMAGES.length)}
          className="bg-black/50 text-white p-2 rounded-full hover:bg-black/70"
        >
          <ChevronRight className="w-6 h-6" />
        </button>
      </div>
    </div>
  );
  
  // –ö–∞—Ä—Ç–æ—á–∫–∞ —É—Å–ª—É–≥–∏
  const ServiceCard = ({ service, index }) => (
    <motion.div
      initial={{ opacity: 0, y: 20 }}
      animate={{ opacity: 1, y: 0 }}
      transition={{ delay: index * 0.1 }}
      className={`bg-gradient-to-br ${service.color} rounded-xl shadow-lg p-6 cursor-pointer transform transition-all duration-300 hover:shadow-2xl hover:scale-105`}
      onClick={() => setActiveTab('contact')}
    >
      <div className="flex items-center mb-4">
        <div className="bg-white/30 p-3 rounded-lg text-white">
          {service.icon}
        </div>
        <h3 className="text-xl font-bold text-white ml-4">{service.name}</h3>
      </div>
      <p className="text-white/90 mb-4">{service.description}</p>
      <div className="flex justify-between items-center">
        <span className="text-lg font-bold text-white">
          {service.name === "–ó–∞–±–æ—Ä—ã" && "–æ—Ç 700 ‚ÇΩ/–º"}
          {service.name === "–ù–∞–≤–µ—Å—ã" && "–æ—Ç 15 000 ‚ÇΩ"}
          {service.name === "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏" && "–∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ"}
        </span>
        <ChevronRight className="w-5 h-5 text-white" />
      </div>
    </motion.div>
  );
  
  // –≠–ª–µ–º–µ–Ω—Ç –≥–∞–ª–µ—Ä–µ–∏
  const GalleryItem = ({ image, index }) => (
    <motion.div
      key={index}
      initial={{ opacity: 0, scale: 0.8 }}
      animate={{ opacity: index === currentImageIndex ? 1 : 0, scale: index === currentImageIndex ? 1 : 0.8 }}
      transition={{ duration: 0.5 }}
      className="absolute inset-0 transition-opacity duration-500"
    >
      <img src={image} alt={`–ì–∞–ª–µ—Ä–µ—è ${index + 1}`} className="w-full h-full object-cover rounded-xl" />
      <div className="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent flex items-end justify-center pb-6">
        <span className="text-white text-lg font-semibold">–ü—Ä–æ–µ–∫—Ç #{index + 1}</span>
      </div>
    </motion.div>
  );
  
  // –ü—Ä–æ–≥–Ω–æ–∑ —Ü–µ–Ω
  const PriceForecastChart = () => (
    <div className="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6">
      <h3 className="text-2xl font-bold mb-6 flex items-center">
        <TrendingUp className="mr-3 text-blue-600" />
        –ü—Ä–æ–≥–Ω–æ–∑ —Ü–µ–Ω –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
      </h3>
      
      <div className="h-64 relative">
        {/* –û—Å—å Y */}
        <div className="absolute top-0 bottom-0 w-1 bg-gray-300 dark:bg-gray-600 left-8"></div>
        
        {/* –û—Å—å X */}
        <div className="absolute left-8 right-0 h-1 bg-gray-300 dark:bg-gray-600 bottom-8"></div>
        
        {/* –ú–µ—Ç–∫–∏ –ø–æ –æ—Å–∏ Y */}
        <div className="absolute left-0 top-0 h-full flex flex-col justify-between pt-2 pb-8">
          <span className="text-gray-600 dark:text-gray-400 text-sm">800 ‚ÇΩ</span>
          <span className="text-gray-600 dark:text-gray-400 text-sm">750 ‚ÇΩ</span>
          <span className="text-gray-600 dark:text-gray-400 text-sm">700 ‚ÇΩ</span>
        </div>
        
        {/* –ú–µ—Ç–∫–∏ –ø–æ –æ—Å–∏ X */}
        <div className="absolute left-8 right-0 bottom-0 flex justify-between px-1">
          {PRICE_FORECAST.map((item, index) => (
            <span key={index} className="text-gray-600 dark:text-gray-400 text-sm">{item.month}</span>
          ))}
        </div>
        
        {/* –õ–∏–Ω–∏—è –∑–∞–±–æ—Ä–∞ */}
        <svg className="absolute top-0 left-8 w-full h-full" viewBox="0 0 500 200">
          <polyline
            points={PRICE_FORECAST.map((item, index) => {
              const x = index * 100;
              const y = 200 - (item.fence - 700) * 2;
              return `${x},${y}`;
            }).join(' ')}
            fill="none"
            stroke="#3b82f6"
            strokeWidth="3"
            strokeLinecap="round"
            strokeLinejoin="round"
          />
          {PRICE_FORECAST.map((item, index) => {
            const x = index * 100;
            const y = 200 - (item.fence - 700) * 2;
            return (
              <circle
                key={`fence-${index}`}
                cx={x}
                cy={y}
                r="5"
                fill="#3b82f6"
                className="hover:fill-blue-700 cursor-pointer"
                title={`–ó–∞–±–æ—Ä: ${item.fence} ‚ÇΩ`}
              />
            );
          })}
        </svg>
        
        {/* –õ–∏–Ω–∏—è –Ω–∞–≤–µ—Å–∞ */}
        <svg className="absolute top-0 left-8 w-full h-full" viewBox="0 0 500 200">
          <polyline
            points={PRICE_FORECAST.map((item, index) => {
              const x = index * 100;
              const y = 200 - (item.canopy - 15000) / 40;
              return `${x},${y}`;
            }).join(' ')}
            fill="none"
            stroke="#10b981"
            strokeWidth="3"
            strokeLinecap="round"
            strokeLinejoin="round"
          />
          {PRICE_FORECAST.map((item, index) => {
            const x = index * 100;
            const y = 200 - (item.canopy - 15000) / 40;
            return (
              <circle
                key={`canopy-${index}`}
                cx={x}
                cy={y}
                r="5"
                fill="#10b981"
                className="hover:fill-green-700 cursor-pointer"
                title={`–ù–∞–≤–µ—Å: ${item.canopy} ‚ÇΩ`}
              />
            );
          })}
        </svg>
      </div>
      
      <div className="mt-6 flex justify-center space-x-6">
        <div className="flex items-center">
          <div className="w-4 h-4 bg-blue-500 rounded-full mr-2"></div>
          <span className="text-gray-700 dark:text-gray-300">–ó–∞–±–æ—Ä</span>
        </div>
        <div className="flex items-center">
          <div className="w-4 h-4 bg-green-500 rounded-full mr-2"></div>
          <span className="text-gray-700 dark:text-gray-300">–ù–∞–≤–µ—Å</span>
        </div>
      </div>
      
      <div className="mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg">
        <div className="flex items-start">
          <AlertCircle className="w-5 h-5 text-blue-500 mr-2 mt-0.5 flex-shrink-0" />
          <p className="text-gray-700 dark:text-gray-300">
            –¶–µ–Ω—ã –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –±—É–¥—É—Ç —Ä–∞—Å—Ç–∏. –ó–∞–∫–∞–∂–∏—Ç–µ —Å–µ–π—á–∞—Å, —á—Ç–æ–±—ã –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—É—â—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å!
          </p>
        </div>
      </div>
    </div>
  );
  
  // –¢–µ—Å—Ç "–ö–∞–∫–æ–π –∑–∞–±–æ—Ä –≤–∞–º –ø–æ–¥—Ö–æ–¥–∏—Ç?"
  const FenceQuiz = () => (
    <div className="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6">
      <h3 className="text-2xl font-bold mb-6 flex items-center">
        <Search className="mr-3 text-blue-600" />
        –ö–∞–∫–æ–π –∑–∞–±–æ—Ä –≤–∞–º –ø–æ–¥—Ö–æ–¥–∏—Ç?
      </h3>
      
      {quizResult ? (
        <motion.div
          initial={{ opacity: 0, scale: 0.9 }}
          animate={{ opacity: 1, scale: 1 }}
          className="text-center"
        >
          <div className="relative inline-block mb-6">
            <img 
              src={quizResult.image} 
              alt="–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –∑–∞–±–æ—Ä" 
              className="w-64 h-48 object-cover rounded-lg shadow-md"
            />
            <div className="absolute -top-4 -right-4 bg-red-500 text-white w-10 h-10 rounded-full flex items-center justify-center font-bold">
              S
            </div>
          </div>
          
          <h4 className="text-xl font-bold mb-2 text-gray-900 dark:text-white">–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º: {quizResult.fence}</h4>
          <p className="text-gray-600 dark:text-gray-300 mb-4">{quizResult.description}</p>
          
          <div className="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg inline-block mb-6">
            <span className="font-bold text-blue-600">–¶–µ–Ω–∞:</span> {quizResult.priceRange}
          </div>
          
          <div className="flex justify-center space-x-4">
            <button
              onClick={() => {
                setQuizStep(0);
                setQuizAnswers({});
                setQuizResult(null);
              }}
              className="bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white px-6 py-2 rounded-lg"
            >
              –ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç –∑–∞–Ω–æ–≤–æ
            </button>
            <button
              onClick={() => setActiveTab('contact')}
              className="bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-2 rounded-lg"
            >
              –ó–∞–∫–∞–∑–∞—Ç—å —ç—Ç–æ—Ç –≤–∞—Ä–∏–∞–Ω—Ç
            </button>
          </div>
        </motion.div>
      ) : (
        <div>
          <div className="mb-6">
            <div className="flex justify-between mb-2">
              <span className="text-sm font-medium">–í–æ–ø—Ä–æ—Å {quizStep + 1} –∏–∑ {QUIZ_QUESTIONS.length}</span>
              <span className="text-sm text-gray-500">
                {Math.round(((quizStep + 1) / QUIZ_QUESTIONS.length) * 100)}%
              </span>
            </div>
            <div className="w-full bg-gray-200 rounded-full h-2.5">
              <div 
                className="bg-blue-600 h-2.5 rounded-full" 
                style={{ width: `${((quizStep + 1) / QUIZ_QUESTIONS.length) * 100}%` }}
              ></div>
            </div>
          </div>
          
          <h4 className="text-xl font-bold mb-6">{QUIZ_QUESTIONS[quizStep].question}</h4>
          
          <div className="space-y-4">
            {QUIZ_QUESTIONS[quizStep].options.map((option) => (
              <button
                key={option.id}
                onClick={() => handleQuizAnswer(option.id)}
                className="w-full text-left p-4 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors duration-300"
              >
                <h5 className="font-semibold mb-1">{option.text}</h5>
                <p className="text-gray-600 dark:text-gray-400 text-sm">{option.description}</p>
                {option.priceRange && (
                  <p className="text-blue-600 dark:text-blue-400 text-sm mt-1">{option.priceRange}</p>
                )}
              </button>
            ))}
          </div>
        </div>
      )}
    </div>
  );
  
  // –ü—Ä–æ–≥—Ä–∞–º–º–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏
  const LoyaltyProgram = () => (
    <div className="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6">
      <div className="flex justify-between items-start mb-6">
        <div>
          <h3 className="text-2xl font-bold flex items-center">
            <Crown className="mr-3 text-yellow-500" />
            –ü—Ä–æ–≥—Ä–∞–º–º–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏
          </h3>
          <p className="text-gray-600 dark:text-gray-400">–ó–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –±–∞–ª–ª—ã –∑–∞ –∫–∞–∂–¥—ã–π –∑–∞–∫–∞–∑</p>
        </div>
        <button
          onClick={() => setLoyaltyProgramOpen(!loyaltyProgramOpen)}
          className="text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"
        >
          {loyaltyProgramOpen ? <ChevronUp className="w-5 h-5" /> : <ChevronDown className="w-5 h-5" />}
        </button>
      </div>
      
      <AnimatePresence>
        {loyaltyProgramOpen && (
          <motion.div
            initial={{ opacity: 0, height: 0 }}
            animate={{ opacity: 1, height: 'auto' }}
            exit={{ opacity: 0, height: 0 }}
            transition={{ duration: 0.3 }}
          >
            <div className="mb-6">
              <div className="flex justify-between mb-2">
                <span className="font-medium">–í–∞—à–∏ –±–∞–ª–ª—ã: {loyaltyPoints}</span>
                <span className="text-blue-600">1 –±–∞–ª–ª = 1 ‚ÇΩ</span>
              </div>
              <div className="w-full bg-gray-200 rounded-full h-2.5">
                <div 
                  className="bg-gradient-to-r from-blue-500 to-purple-600 h-2.5 rounded-full" 
                  style={{ width: `${(loyaltyPoints % 500) / 5}%` }}
                ></div>
              </div>
              <div className="flex justify-between text-xs text-gray-500 mt-1">
                <span>0 –±–∞–ª–ª–æ–≤</span>
                <span>{Math.floor(loyaltyPoints / 500) * 500 + 500} –±–∞–ª–ª–æ–≤</span>
              </div>
            </div>
            
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
              <div className="p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg">
                <h4 className="font-bold mb-2 flex items-center">
                  <Plus className="w-4 h-4 mr-2 text-blue-600" />
                  –ö–∞–∫ –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å –±–∞–ª–ª—ã?
                </h4>
                <ul className="space-y-2 text-sm">
                  <li className="flex items-start">
                    <Check className="w-4 h-4 text-green-500 mr-2 mt-1 flex-shrink-0" />
                    <span>50 –±–∞–ª–ª–æ–≤ –∑–∞ –∫–∞–∂–¥—ã–π –∑–∞–∫–∞–∑</span>
                  </li>
                  <li className="flex items-start">
                    <Check className="w-4 h-4 text-green-500 mr-2 mt-1 flex-shrink-0" />
                    <span>100 –±–∞–ª–ª–æ–≤ –∑–∞ –æ—Ç–∑—ã–≤ —Å —Ñ–æ—Ç–æ</span>
                  </li>
                  <li className="flex items-start">
                    <Check className="w-4 h-4 text-green-500 mr-2 mt-1 flex-shrink-0" />
                    <span>200 –±–∞–ª–ª–æ–≤ –∑–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–∞</span>
                  </li>
                </ul>
              </div>
              
              <div className="p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg">
                <h4 className="font-bold mb-2 flex items-center">
                  <Gift className="w-4 h-4 mr-2 text-purple-600" />
                  –ö–∞–∫ –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å –±–∞–ª–ª—ã?
                </h4>
                <ul className="space-y-2 text-sm">
                  <li className="flex items-start">
                    <Minus className="w-4 h-4 text-red-500 mr-2 mt-1 flex-shrink-0" />
                    <span>500 –±–∞–ª–ª–æ–≤ = —Å–∫–∏–¥–∫–∞ 500 ‚ÇΩ</span>
                  </li>
                  <li className="flex items-start">
                    <Minus className="w-4 h-4 text-red-500 mr-2 mt-1 flex-shrink-0" />
                    <span>1000 –±–∞–ª–ª–æ–≤ = –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤–æ—Ä–æ—Ç</span>
                  </li>
                  <li className="flex items-start">
                    <Minus className="w-4 h-4 text-red-500 mr-2 mt-1 flex-shrink-0" />
                    <span>2000 –±–∞–ª–ª–æ–≤ = —Å–∫–∏–¥–∫–∞ 15%</span>
                  </li>
                </ul>
              </div>
            </div>
            
            <div className="text-center">
              <button className="bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-2 rounded-lg font-semibold">
                –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É
              </button>
            </div>
          </motion.div>
        )}
      </AnimatePresence>
    </div>
  );
  
  // –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞
  const ReferralProgram = () => (
    <div className="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6">
      <div className="flex justify-between items-start mb-6">
        <div>
          <h3 className="text-2xl font-bold flex items-center">
            <Share2 className="mr-3 text-green-500" />
            –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞
          </h3>
          <p className="text-gray-600 dark:text-gray-400">–ü—Ä–∏–≤–æ–¥–∏—Ç–µ –¥—Ä—É–∑–µ–π –∏ –ø–æ–ª—É—á–∞–π—Ç–µ —Å–∫–∏–¥–∫–∏</p>
        </div>
        <button
          onClick={() => setReferralProgramOpen(!referralProgramOpen)}
          className="text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"
        >
          {referralProgramOpen ? <ChevronUp className="w-5 h-5" /> : <ChevronDown className="w-5 h-5" />}
        </button>
      </div>
      
      <AnimatePresence>
        {referralProgramOpen && (
          <motion.div
            initial={{ opacity: 0, height: 0 }}
            animate={{ opacity: 1, height: 'auto' }}
            exit={{ opacity: 0, height: 0 }}
            transition={{ duration: 0.3 }}
          >
            <div className="mb-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg">
              <div className="flex items-start">
                <ShieldCheck className="w-5 h-5 text-green-500 mr-2 mt-0.5 flex-shrink-0" />
                <p className="text-gray-700 dark:text-gray-300">
                  –ü—Ä–∏–≤–µ–¥–∏—Ç–µ –¥—Ä—É–≥–∞ ‚Äî –ø–æ–ª—É—á–∏—Ç–µ 10% —Å–∫–∏–¥–∫—É –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –∑–∞–∫–∞–∑! –í–∞—à –¥—Ä—É–≥ —Ç–æ–∂–µ –ø–æ–ª—É—á–∏—Ç 5% —Å–∫–∏–¥–∫—É.
                </p>
              </div>
            </div>
            
            <div className="mb-6">
              <h4 className="font-bold mb-3">–í–∞—à–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞:</h4>
              <div className="flex">
                <input
                  type="text"
                  value={`https://stroybrigada-shumerlya.ru?ref=${referralCode}`}
                  readOnly
                  className="flex-1 p-2 border rounded-l-lg bg-gray-50 dark:bg-gray-700 border-gray-300 dark:border-gray-600"
                />
                <button className="bg-blue-600 text-white p-2 rounded-r-lg hover:bg-blue-700">
                  <Copy className="w-5 h-5" />
                </button>
              </div>
            </div>
            
            <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
              <div className="p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-center">
                <Users className="w-8 h-8 text-blue-600 mx-auto mb-2" />
                <p className="font-bold">3</p>
                <p className="text-sm">–ü—Ä–∏–≤–ª–µ—á–µ–Ω–æ –¥—Ä—É–∑–µ–π</p>
              </div>
              <div className="p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg text-center">
                <Gift className="w-8 h-8 text-purple-600 mx-auto mb-2" />
                <p className="font-bold">30%</p>
                <p className="text-sm">–û–±—â–∞—è —Å–∫–∏–¥–∫–∞</p>
              </div>
              <div className="p-4 bg-green-50 dark:bg-green-900/20 rounded-lg text-center">
                <Percent className="w-8 h-8 text-green-600 mx-auto mb-2" />
                <p className="font-bold">1500 ‚ÇΩ</p>
                <p className="text-sm">–≠–∫–æ–Ω–æ–º–∏—è</p>
              </div>
            </div>
            
            <div className="text-center">
              <button className="bg-gradient-to-r from-green-500 to-emerald-600 text-white px-6 py-2 rounded-lg font-semibold flex items-center justify-center mx-auto">
                <Share2 className="w-4 h-4 mr-2" />
                –ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Å—Å—ã–ª–∫–æ–π
              </button>
            </div>
          </motion.div>
        )}
      </AnimatePresence>
    </div>
  );
  
  // 3D –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
  const ThreeDConstructor = () => (
    <div className="bg-white dark:bg-gray-800 rounded-xl shadow-xl p-6">
      <div className="flex justify-between items-center mb-6">
        <h3 className="text-2xl font-bold text-gray-900 dark:text-white">3D –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä</h3>
        <div className="flex space-x-2">
          <button
            onClick={() => setThreeDView('fence')}
            className={`px-4 py-2 rounded-lg font-medium ${
              threeDView === 'fence' 
                ? 'bg-blue-600 text-white' 
                : 'bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300'
            }`}
          >
            –ó–∞–±–æ—Ä
          </button>
          <button
            onClick={() => setThreeDView('canopy')}
            className={`px-4 py-2 rounded-lg font-medium ${
              threeDView === 'canopy' 
                ? 'bg-green-600 text-white' 
                : 'bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300'
            }`}
          >
            –ù–∞–≤–µ—Å
          </button>
        </div>
      </div>
      
      <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <div className="lg:col-span-2">
          <div className="bg-gray-100 dark:bg-gray-900 rounded-lg h-96">
            <Canvas shadows camera={{ position: [5, 3, 5], fov: 50 }}>
              <ambientLight intensity={0.5} />
              <directionalLight position={[10, 10, 5]} intensity={1} castShadow />
              <OrbitControls enableZoom={true} enablePan={true} />
              
              {threeDView === 'fence' ? <FenceModel /> : <CanopyModel />}
              
              <mesh rotation={[-Math.PI / 2, 0, 0]} position={[0, -1, 0]}>
                <planeGeometry args={[10, 10]} />
                <meshStandardMaterial color="#e5e7eb" opacity={0.3} transparent />
              </mesh>
            </Canvas>
          </div>
        </div>
        
        <div className="space-y-4">
          {threeDView === 'fence' ? (
            <>
              <div>
                <label className="block text-sm font-medium mb-2">–¢–∏–ø –∑–∞–±–æ—Ä–∞</label>
                <select
                  value={fenceConfig.type}
                  onChange={(e) => setFenceConfig({ ...fenceConfig, type: e.target.value })}
                  className="w-full p-3 border rounded-lg bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600"
                >
                  {Object.keys(FENCE_PRICES).map(type => (
                    <option key={type} value={type}>{type.charAt(0).toUpperCase() + type.slice(1)}</option>
                  ))}
                </select>
              </div>
              
              <div>
                <label className="block text-sm font-medium mb-2">–í—ã—Å–æ—Ç–∞ (–º)</label>
                <input
                  type="range"
                  min="1"
                  max="3"
                  step="0.1"
                  value={fenceConfig.height}
                  onChange={(e) => setFenceConfig({ ...fenceConfig, height: parseFloat(e.target.value) })}
                  className="w-full"
                />
                <div className="flex justify-between text-xs text-gray-500">
                  <span>1 –º</span>
                  <span>{fenceConfig.height.toFixed(1)} –º</span>
                  <span>3 –º</span>
                </div>
              </div>
              
              <div>
                <label className="block text-sm font-medium mb-2">–î–ª–∏–Ω–∞ (–º)</label>
                <input
                  type="range"
                  min="5"
                  max="50"
                  value={fenceConfig.length}
                  onChange={(e) => setFenceConfig({ ...fenceConfig, length: parseInt(e.target.value) })}
                  className="w-full"
                />
                <div className="flex justify-between text-xs text-gray-500">
                  <span>5 –º</span>
                  <span>{fenceConfig.length} –º</span>
                  <span>50 –º</span>
                </div>
              </div>
              
              <div className="flex items-center">
                <input
                  type="checkbox"
                  id="gates"
                  checked={fenceConfig.gates}
                  onChange={(e) => setFenceConfig({ ...fenceConfig, gates: e.target.checked })}
                  className="h-5 w-5 text-blue-600"
                />
                <label htmlFor="gates" className="ml-2 text-sm">–í–æ—Ä–æ—Ç–∞</label>
              </div>
              
              <div>
                <label className="block text-sm font-medium mb-2">–¶–≤–µ—Ç</label>
                <input
                  type="color"
                  value={fenceConfig.color}
                  onChange={(e) => setFenceConfig({ ...fenceConfig, color: e.target.value })}
                  className="w-full h-10"
                />
              </div>
            </>
          ) : (
            <>
              <div>
                <label className="block text-sm font-medium mb-2">–¢–∏–ø –Ω–∞–≤–µ—Å–∞</label>
                <select
                  value={selectedCanopyType}
                  onChange={(e) => setSelectedCanopyType(e.target.value)}
                  className="w-full p-3 border rounded-lg bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600"
                >
                  <option value="–∞–≤—Ç–æ–º–æ–±–∏–ª—å">–î–ª—è –∞–≤—Ç–æ–º–æ–±–∏–ª—è</option>
                  <option value="—Ç–µ—Ä—Ä–∞—Å–∞">–î–ª—è —Ç–µ—Ä—Ä–∞—Å—ã</option>
                  <option value="–±–µ—Å–µ–¥–∫–∞">–î–ª—è –±–µ—Å–µ–¥–∫–∏</option>
                </select>
              </div>
              
              <div>
                <label className="block text-sm font-medium mb-2">–†–∞–∑–º–µ—Ä</label>
                <select
                  value={formData.canopySize}
                  onChange={(e) => setFormData({ ...formData, canopySize: e.target.value })}
                  className="w-full p-3 border rounded-lg bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600"
                >
                  <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑–º–µ—Ä</option>
                  <option value="–¥–æ 10 –º¬≤">–î–æ 10 –º¬≤</option>
                  <option value="10-20 –º¬≤">10-20 –º¬≤</option>
                  <option value="—Å–≤—ã—à–µ 20 –º¬≤">–°–≤—ã—à–µ 20 –º¬≤</option>
                </select>
              </div>
              
              <div>
                <label className="block text-sm font-medium mb-2">–ú–∞—Ç–µ—Ä–∏–∞–ª</label>
                <select className="w-full p-3 border rounded-lg bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600">
                  <option value="–º–µ—Ç–∞–ª–ª">–ú–µ—Ç–∞–ª–ª</option>
                  <option value="–¥–µ—Ä–µ–≤–æ">–î–µ—Ä–µ–≤–æ</option>
                  <option value="—Å—Ç–µ–∫–ª–æ">–°—Ç–µ–∫–ª–æ</option>
                </select>
              </div>
            </>
          )}
          
          <div className="grid grid-cols-2 gap-4">
            <button
              onClick={startARPreview}
              className="bg-purple-600 text-white py-2 px-4 rounded-lg font-semibold hover:bg-purple-700 transition-all duration-300 flex items-center justify-center"
            >
              <RadioTower className="w-4 h-4 mr-2" />
              AR
            </button>
            <button className="bg-gradient-to-r from-blue-600 to-purple-600 text-white py-2 px-4 rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-300 flex items-center justify-center">
              <Download className="w-4 h-4 mr-2" />
              –°–∫–∞—á–∞—Ç—å
            </button>
          </div>
        </div>
      </div>
    </div>
  );
  
  // –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ
  const SpecialOfferBanner = () => (
    <motion.div
      key={currentOfferIndex}
      initial={{ opacity: 0, x: 50 }}
      animate={{ opacity: 1, x: 0 }}
      exit={{ opacity: 0, x: -50 }}
      transition={{ duration: 0.5 }}
      className={`fixed top-4 right-4 z-50 max-w-sm rounded-xl shadow-xl overflow-hidden ${
        isDarkMode ? 'bg-gray-800' : 'bg-white'
      }`}
    >
      <div className="p-4">
        <div className="flex items-start">
          <div className="flex-shrink-0 mr-3 mt-1">
            {SPECIAL_OFFERS[currentOfferIndex].icon}
          </div>
          <div>
            <div className="flex justify-between">
              <h4 className="font-bold text-gray-900 dark:text-white">
                {SPECIAL_OFFERS[currentOfferIndex].title}
              </h4>
              <span className={`text-xs px-2 py-1 rounded-full font-medium ${
                SPECIAL_OFFERS[currentOfferIndex].color
              }`}>
                {SPECIAL_OFFERS[currentOfferIndex].badge}
              </span>
            </div>
            <p className="text-gray-600 dark:text-gray-300 mt-1 text-sm">
              {SPECIAL_OFFERS[currentOfferIndex].description}
            </p>
            <button className="mt-2 text-sm text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-medium">
              –ü–æ–¥—Ä–æ–±–Ω–µ–µ ‚Üí
            </button>
          </div>
        </div>
      </div>
    </motion.div>
  );
  
  return (
    <div className={`min-h-screen transition-colors duration-300 ${isDarkMode ? 'bg-gray-900 text-white' : 'bg-gray-50 text-gray-900'}`}>
      {/* Special Offer Banner */}
      <AnimatePresence>
        {activeTab === 'home' && <SpecialOfferBanner />}
      </AnimatePresence>
      
      {/* Header */}
      <header className={`${isDarkMode ? 'bg-gray-800' : 'bg-white'} shadow-lg sticky top-0 z-50`}>
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="flex justify-between items-center py-4">
            <div className="flex items-center">
              <div className="bg-gradient-to-r from-blue-500 to-purple-600 p-2 rounded-lg">
                <Building className="w-8 h-8 text-white" />
              </div>
              <div className="ml-3">
                <h1 className="text-xl font-bold text-gray-900">{COMPANY_NAME}</h1>
                <p className={`text-sm ${isDarkMode ? 'text-gray-300' : 'text-gray-600'}`}>–®—É–º–µ—Ä–ª—è</p>
              </div>
            </div>
            
            <nav className="hidden md:flex space-x-8">
              {['home', 'services', 'gallery', 'testimonials', 'contact'].map((tab) => (
                <button
                  key={tab}
                  onClick={() => setActiveTab(tab)}
                  className={`capitalize font-medium transition-colors duration-300 ${
                    activeTab === tab ? 'text-blue-600 border-b-2 border-blue-600' : isDarkMode ? 'text-gray-300 hover:text-blue-400' : 'text-gray-700 hover:text-blue-600'
                  }`}
                >
                  {tab === 'home' ? '–ì–ª–∞–≤–Ω–∞—è' : 
                   tab === 'services' ? '–£—Å–ª—É–≥–∏' :
                   tab === 'gallery' ? '–ì–∞–ª–µ—Ä–µ—è' :
                   tab === 'testimonials' ? '–û—Ç–∑—ã–≤—ã' : '–ö–æ–Ω—Ç–∞–∫—Ç—ã'}
                </button>
              ))}
            </nav>

            <div className="flex items-center space-x-4">
              <button
                onClick={() => setIsDarkMode(!isDarkMode)}
                className={`p-2 rounded-full ${isDarkMode ? 'bg-yellow-400 text-gray-900' : 'bg-gray-200 text-gray-700'} transition-colors duration-300`}
              >
                {isDarkMode ? <Sun className="w-5 h-5" /> : <Moon className="w-5 h-5" />}
              </button>
              
              <button
                className="p-2 rounded-full bg-blue-600 text-white hover:bg-blue-700 transition-colors duration-300"
                onClick={() => window.scrollTo({ top: 0, behavior: 'smooth' })}
              >
                <RefreshCw className="w-5 h-5" />
              </button>
              
              <button
                className="md:hidden"
                onClick={() => setShowMenu(!showMenu)}
              >
                {showMenu ? <X className="w-6 h-6" /> : <Menu className="w-6 h-6" />}
              </button>
            </div>
          </div>
        </div>

        {/* Mobile menu */}
        {showMenu && (
          <div className={`${isDarkMode ? 'bg-gray-800' : 'bg-white'} md:hidden border-t`}>
            <div className="px-4 py-2 space-y-2">
              {['home', 'services', 'gallery', 'testimonials', 'contact'].map((tab) => (
                <button
                  key={tab}
                  onClick={() => {
                    setActiveTab(tab);
                    setShowMenu(false);
                  }}
                  className={`block w-full text-left py-2 capitalize font-medium ${isDarkMode ? 'text-gray-300 hover:text-blue-400' : 'text-gray-700 hover:text-blue-600'}`}
                >
                  {tab === 'home' ? '–ì–ª–∞–≤–Ω–∞—è' : 
                   tab === 'services' ? '–£—Å–ª—É–≥–∏' :
                   tab === 'gallery' ? '–ì–∞–ª–µ—Ä–µ—è' :
                   tab === 'testimonials' ? '–û—Ç–∑—ã–≤—ã' : '–ö–æ–Ω—Ç–∞–∫—Ç—ã'}
                </button>
              ))}
            </div>
          </div>
        )}
      </header>

      {/* Hero Section */}
      {activeTab === 'home' && (
        <section className="relative bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-700 text-white py-20 overflow-hidden">
          <div className="absolute inset-0 bg-[url('https://placehold.co/1920x1080/2563eb/ffffff?text=Background')] opacity-10"></div>
          
          <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
            <div className="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
              <motion.div
                initial={{ opacity: 0, x: -50 }}
                animate={{ opacity: 1, x: 0 }}
                transition={{ duration: 0.8 }}
              >
                <h1 className="text-4xl md:text-6xl font-bold mb-6 leading-tight">
                  –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ
                  <span className="block text-yellow-300">—Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ</span>
                  –≤ –®—É–º–µ—Ä–ª–µ
                </h1>
                <p className="text-xl mb-8 text-blue-100">
                  –ó–∞–±–æ—Ä—ã, –Ω–∞–≤–µ—Å—ã –∏ –æ–≥—Ä–∞–∂–¥–µ–Ω–∏—è –≤—ã—Å–æ–∫–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞. –ë—ã—Å—Ç—Ä–æ, –Ω–∞–¥–µ–∂–Ω–æ, –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ!
                </p>
                
                <div className="flex flex-col sm:flex-row gap-4 mb-8">
                  <button
                    onClick={() => setActiveTab('services')}
                    className="bg-white text-blue-600 px-8 py-4 rounded-lg font-bold hover:bg-gray-100 transition-colors duration-300 flex items-center justify-center"
                  >
                    <Zap className="mr-2" />
                    –ù–∞—à–∏ —É—Å–ª—É–≥–∏
                  </button>
                  <button
                    onClick={() => setActiveTab('contact')}
                    className="border-2 border-white text-white px-8 py-4 rounded-lg font-bold hover:bg-white hover:text-blue-600 transition-colors duration-300 flex items-center justify-center"
                  >
                    <Phone className="mr-2" />
                    –ü–æ–∑–≤–æ–Ω–∏—Ç—å
                  </button>
                </div>
                
                {/* Stats cards */}
                <div className="grid grid-cols-3 gap-4 mt-8">
                  <div className="bg-white/20 backdrop-blur-sm rounded-lg p-4 text-center">
                    <Users className="w-8 h-8 mx-auto mb-2 text-white" />
                    <p className="font-bold text-white">1000+</p>
                    <p className="text-sm text-white/80">–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤</p>
                  </div>
                  <div className="bg-white/20 backdrop-blur-sm rounded-lg p-4 text-center">
                    <Award className="w-8 h-8 mx-auto mb-2 text-white" />
                    <p className="font-bold text-white">{YEARS_OF_EXPERIENCE}+</p>
                    <p className="text-sm text-white/80">–õ–µ—Ç –æ–ø—ã—Ç–∞</p>
                  </div>
                  <div className="bg-white/20 backdrop-blur-sm rounded-lg p-4 text-center">
                    <Shield className="w-8 h-8 mx-auto mb-2 text-white" />
                    <p className="font-bold text-white">10</p>
                    <p className="text-sm text-white/80">–õ–µ—Ç –≥–∞—Ä–∞–Ω—Ç–∏–∏</p>
                  </div>
                </div>
              </motion.div>
              
              <motion.div
                initial={{ opacity: 0, x: 50 }}
                animate={{ opacity: 1, x: 0 }}
                transition={{ duration: 0.8, delay: 0.2 }}
                className="relative"
              >
                <ThreeDConstructor />
              </motion.div>
            </div>
          </div>
          
          {/* Floating decorative elements */}
          <motion.div
            className="absolute top-20 right-10 w-20 h-20 bg-yellow-400 rounded-full opacity-30"
            animate={{ y: [0, 20, 0], rotate: [0, 360, 0] }}
            transition={{ duration: 8, repeat: Infinity, ease: "easeInOut" }}
          ></motion.div>
          <motion.div
            className="absolute bottom-20 left-10 w-16 h-16 bg-green-400 rounded-full opacity-30"
            animate={{ y: [0, 15, 0], rotate: [0, 360, 0] }}
            transition={{ duration: 10, repeat: Infinity, ease: "easeInOut" }}
          ></motion.div>
          
          {/* Superman animation */}
          {supermanAnimation && (
            <motion.div
              className="absolute top-4 right-4 w-16 h-16 bg-red-600 rounded-full flex items-center justify-center"
              animate={{ 
                y: [-20, -100, -200],
                x: [0, 50, 100],
                rotate: [0, 360]
              }}
              transition={{ 
                duration: 3,
                ease: "easeOut"
              }}
            >
              <span className="text-white font-bold text-2xl">S</span>
            </motion.div>
          )}
        </section>
      )}

      {/* Services Section */}
      {activeTab === 'services' && (
        <section className={`py-20 ${isDarkMode ? 'bg-gray-800' : 'bg-gray-50'}`}>
          <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <motion.div
              initial={{ opacity: 0, y: 20 }}
              animate={{ opacity: 1, y: 0 }}
              className="text-center mb-16"
            >
              <h2 className="text-4xl font-bold text-gray-900 mb-4">–ù–∞—à–∏ —É—Å–ª—É–≥–∏</h2>
              <p className="text-xl text-gray-600 max-w-3xl mx-auto">
                –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –≤–∞—à–µ–≥–æ —É—á–∞—Å—Ç–∫–∞ –∏ –¥–æ–º–∞
              </p>
            </motion.div>

            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-16">
              {SERVICES.map((service, index) => (
                <ServiceCard key={service.id} service={service} index={index} />
              ))}
            </div>

            {/* Key Benefits */}
            <div className="bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 mb-16">
              <h3 className="text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center">
                <Award className="mr-3 text-yellow-500" />
                –ü–æ—á–µ–º—É –≤—ã–±–∏—Ä–∞—é—Ç –Ω–∞—Å?
              </h3>
              
              <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                {KEY_BENEFITS.map((benefit, index) => (
                  <div key={index} className="bg-blue-50 dark:bg-blue-900/20 p-6 rounded-xl">
                    <div className="w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center mb-4">
                      <Star className="text-blue-600 dark:text-blue-300" />
                    </div>
                    <h4 className="text-xl font-bold mb-2 text-gray-900 dark:text-white">–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ #{index + 1}</h4>
                    <p className="text-gray-600 dark:text-gray-300">{benefit}</p>
                  </div>
                ))}
              </div>
            </div>
            
            {/* Fence Quiz */}
            <FenceQuiz />
            
            {/* Price Forecast */}
            <div className="mt-16">
              <div className="flex justify-between items-center mb-6">
                <h3 className="text-2xl font-bold text-gray-900 dark:text-white flex items-center">
                  <TrendingUp className="mr-3 text-blue-600" />
                  –ü—Ä–æ–≥–Ω–æ–∑ —Ü–µ–Ω –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
                </h3>
                <button
                  onClick={() => setIsPriceForecastVisible(!isPriceForecastVisible)}
                  className="text-blue-600 hover:text-blue-800 dark:hover:text-blue-400 font-medium"
                >
                  {isPriceForecastVisible ? '–°–∫—Ä—ã—Ç—å' : '–ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ–≥–Ω–æ–∑'}
                </button>
              </div>
              
              <AnimatePresence>
                {isPriceForecastVisible && (
                  <motion.div
                    initial={{ opacity: 0, height: 0 }}
                    animate={{ opacity: 1, height: 'auto' }}
                    exit={{ opacity: 0, height: 0 }}
                    transition={{ duration: 0.3 }}
                  >
                    <PriceForecastChart />
                  </motion.div>
                )}
              </AnimatePresence>
            </div>
            
            {/* Loyalty Program */}
            <LoyaltyProgram />
            
            {/* Referral Program */}
            <ReferralProgram />
            
            {/* Virtual Tour */}
            <div className="mt-16">
              <div className="flex justify-between items-center mb-6">
                <h3 className="text-2xl font-bold text-gray-900 dark:text-white flex items-center">
                  <Camera className="mr-3 text-green-500" />
                  –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Ç—É—Ä –ø–æ –æ–±—ä–µ–∫—Ç–∞–º
                </h3>
                <button
                  onClick={startVirtualTour}
                  className="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors duration-300"
                >
                  –ù–∞—á–∞—Ç—å —Ç—É—Ä
                </button>
              </div>
              
              {isVirtualTourActive ? (
                <VirtualTour />
              ) : (
                <div className="bg-gray-200 dark:bg-gray-700 rounded-xl h-96 flex items-center justify-center">
                  <div className="text-center">
                    <Camera className="w-16 h-16 text-gray-400 mx-auto mb-4" />
                    <p className="text-gray-600 dark:text-gray-300 mb-4">–ù–∞–∂–º–∏—Ç–µ "–ù–∞—á–∞—Ç—å —Ç—É—Ä", —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –Ω–∞—à–∏ –æ–±—ä–µ–∫—Ç—ã –≤ 360¬∞</p>
                    <p className="text-sm text-gray-500 dark:text-gray-400">–¢—É—Ä –¥–ª–∏—Ç—Å—è 30 —Å–µ–∫—É–Ω–¥ –∏ –ø–æ–∫–∞–∂–µ—Ç –≤–∞–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–∞—à–∏—Ö –ª—É—á—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤</p>
                  </div>
                </div>
              )}
            </div>
          </div>
        </section>
      )}

      {/* Gallery Section */}
      {activeTab === 'gallery' && (
        <section className={`py-20 ${isDarkMode ? 'bg-gray-800' : 'bg-white'}`}>
          <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <motion.div
              initial={{ opacity: 0, y: 20 }}
              animate={{ opacity: 1, y: 0 }}
              className="text-center mb-16"
            >
              <h2 className="text-4xl font-bold text-gray-900 mb-4">–ù–∞—à–∏ —Ä–∞–±–æ—Ç—ã</h2>
              <p className="text-xl text-gray-600 max-w-3xl mx-auto">
                –ì–∞–ª–µ—Ä–µ—è –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –≤ –®—É–º–µ—Ä–ª–µ
              </p>
            </motion.div>

            <div className="relative h-96 rounded-2xl overflow-hidden mb-12 shadow-2xl">
              {GALLERY_IMAGES.map((image, index) => (
                <GalleryItem key={index} image={image} index={index} />
              ))}
              
              <div className="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2">
                {GALLERY_IMAGES.map((_, index) => (
                  <button
                    key={index}
                    onClick={() => setCurrentImageIndex(index)}
                    className={`w-3 h-3 rounded-full transition-colors duration-300 ${
                      index === currentImageIndex ? 'bg-white' : 'bg-white/50'
                    }`}
                  />
                ))}
              </div>
            </div>

            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
              {GALLERY_IMAGES.slice(0, 6).map((image, index) => (
                <motion.div
                  key={index}
                  whileHover={{ scale: 1.05, boxShadow: '0 20px 40px rgba(0,0,0,0.3)' }}
                  className="relative overflow-hidden rounded-xl cursor-pointer group"
                >
                  <img src={image} alt={`–†–∞–±–æ—Ç–∞ ${index + 1}`} className="w-full h-64 object-cover transition-transform duration-500 group-hover:scale-110" />
                  <div className="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent flex items-end justify-center pb-6 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                    <span className="text-white text-lg font-semibold">–ü—Ä–æ–µ–∫—Ç #{index + 1}</span>
                  </div>
                </motion.div>
              ))}
            </div>
            
            {/* AR Preview */}
            <div className="mt-16">
              <div className="text-center mb-8">
                <h3 className="text-3xl font-bold mb-4 flex items-center justify-center">
                  <RadioTower className="mr-3 text-purple-500" />
                  AR-–ø—Ä–µ–≤—å—é –≤–∞—à–∏—Ö –±—É–¥—É—â–∏—Ö —Ä–∞–±–æ—Ç
                </h3>
                <p className="text-xl text-gray-600 max-w-2xl mx-auto">
                  –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ, –∫–∞–∫ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –∑–∞–±–æ—Ä –Ω–∞ –≤–∞—à–µ–º —É—á–∞—Å—Ç–∫–µ —á–µ—Ä–µ–∑ –∫–∞–º–µ—Ä—É —Å–º–∞—Ä—Ç—Ñ–æ–Ω–∞
                </p>
              </div>
              
              {isARActive ? (
                <ARPreview />
              ) : (
                <div className="bg-gray-200 dark:bg-gray-700 rounded-xl h-96 flex flex-col items-center justify-center">
                  <div className="text-center">
                    <RadioTower className="w-16 h-16 text-purple-500 mx-auto mb-4" />
                    <p className="text-gray-600 dark:text-gray-300 mb-4 max-w-md">
                      –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ, —á—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å AR-–ø—Ä–µ–≤—å—é. –ù–∞–≤–µ–¥–∏—Ç–µ –∫–∞–º–µ—Ä—É –Ω–∞ —Å–≤–æ–π —É—á–∞—Å—Ç–æ–∫, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å, –∫–∞–∫ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –∑–∞–±–æ—Ä.
                    </p>
                    <button
                      onClick={startARPreview}
                      className="bg-purple-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-purple-700 transition-colors duration-300 flex items-center"
                    >
                      <RadioTower className="w-5 h-5 mr-2" />
                      –ó–∞–ø—É—Å—Ç–∏—Ç—å AR-–ø—Ä–µ–≤—å—é
                    </button>
                  </div>
                </div>
              )}
            </div>
          </div>
        </section>
      )}

      {/* Testimonials Section */}
      {activeTab === 'testimonials' && (
        <section className={`py-20 ${isDarkMode ? 'bg-gray-800' : 'bg-gray-50'}`}>
          <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <motion.div
              initial={{ opacity: 0, y: 20 }}
              animate={{ opacity: 1, y: 0 }}
              className="text-center mb-16"
            >
              <h2 className="text-4xl font-bold text-gray-900 mb-4">–û—Ç–∑—ã–≤—ã –∫–ª–∏–µ–Ω—Ç–æ–≤</h2>
              <p className="text-xl text-gray-600 max-w-3xl mx-auto">
                –ß—Ç–æ –≥–æ–≤–æ—Ä—è—Ç –æ –Ω–∞—Å –Ω–∞—à–∏ –∫–ª–∏–µ–Ω—Ç—ã
              </p>
            </motion.div>

            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
              {TESTIMONIALS.map((testimonial, index) => (
                <motion.div
                  key={index}
                  initial={{ opacity: 0, y: 20 }}
                  animate={{ opacity: 1, y: 0 }}
                  transition={{ delay: index * 0.1 }}
                  className={`rounded-xl shadow-lg p-6 ${isDarkMode ? 'bg-gray-700' : 'bg-white'}`}
                >
                  <div className="flex items-center mb-4">
                    <img src={testimonial.avatar} alt={testimonial.name} className="w-12 h-12 rounded-full mr-4" />
                    <div>
                      <h3 className="font-bold text-gray-900 dark:text-white">{testimonial.name}</h3>
                      <div className="flex">
                        {[...Array(testimonial.rating)].map((_, i) => (
                          <Star key={i} className="w-4 h-4 text-yellow-400 fill-current" />
                        ))}
                      </div>
                    </div>
                  </div>
                  <p className="text-gray-600 dark:text-gray-300 mb-4">{testimonial.text}</p>
                  {testimonial.verified && (
                    <div className="flex items-center text-green-500 text-sm">
                      <ShieldCheck className="w-4 h-4 mr-1" />
                      –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–π –∑–∞–∫–∞–∑—á–∏–∫
                    </div>
                  )}
                </motion.div>
              ))}
            </div>

            {/* Testimonial Generator */}
            <div className="mt-16 bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8">
              <h3 className="text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center">
                <MessageSquare className="mr-3 text-blue-600" />
                –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Å–≤–æ–π –æ—Ç–∑—ã–≤
              </h3>
              
              <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                  <label className="block text-sm font-medium mb-2">–í–∞—à–µ –∏–º—è</label>
                  <input
                    type="text"
                    className="w-full p-3 border rounded-lg bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600"
                    placeholder="–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤"
                  />
                </div>
                
                <div>
                  <label className="block text-sm font-medium mb-2">–¢–∏–ø —Ä–∞–±–æ—Ç—ã</label>
                  <select className="w-full p-3 border rounded-lg bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600">
                    <option>–ó–∞–±–æ—Ä –∏–∑ –ø—Ä–æ—Ñ–Ω–∞—Å—Ç–∏–ª–∞</option>
                    <option>–ù–∞–≤–µ—Å –¥–ª—è –∞–≤—Ç–æ–º–æ–±–∏–ª—è</option>
                    <option>–†–µ–º–æ–Ω—Ç –∑–∞–±–æ—Ä–∞</option>
                  </select>
                </div>
                
                <div className="md:col-span-2">
                  <label className="block text-sm font-medium mb-2">–í–∞—à–∏ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è</label>
                  <textarea
                    rows={4}
                    className="w-full p-3 border rounded-lg bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600"
                    placeholder="–û–ø–∏—à–∏—Ç–µ —Å–≤–æ–π –æ–ø—ã—Ç —Ä–∞–±–æ—Ç—ã —Å –Ω–∞–º–∏..."
                  ></textarea>
                </div>
                
                <button className="md:col-span-2 w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 px-6 rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-300">
                  –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–∑—ã–≤
                </button>
              </div>
            </div>
          </div>
        </section>
      )}

      {/* Contact Section */}
      {activeTab === 'contact' && (
        <section className={`py-20 ${isDarkMode ? 'bg-gray-800' : 'bg-white'}`}>
          <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <motion.div
              initial={{ opacity: 0, y: 20 }}
              animate={{ opacity: 1, y: 0 }}
              className="text-center mb-16"
            >
              <h2 className="text-4xl font-bold text-gray-900 mb-4">–ö–æ–Ω—Ç–∞–∫—Ç—ã</h2>
              <p className="text-xl text-gray-600 max-w-3xl mx-auto">
                –°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –∏ –∑–∞–∫–∞–∑–∞
              </p>
            </motion.div>

            <div className="grid grid-cols-1 lg:grid-cols-2 gap-12">
              <div>
                <div className="space-y-8">
                  <div className="flex items-start">
                    <div className="bg-gradient-to-br from-blue-500 to-blue-600 p-3 rounded-lg text-white mr-4">
                      <Phone className="w-6 h-6" />
                    </div>
                    <div>
                      <h3 className="text-lg font-semibold text-gray-900 mb-1">–¢–µ–ª–µ—Ñ–æ–Ω</h3>
                      <p className="text-gray-600">+7 (8332) 123-456</p>
                      <p className="text-gray-600">+7 (937) 388-1435</p>
                    </div>
                  </div>

                  <div className="flex items-start">
                    <div className="bg-gradient-to-br from-green-500 to-green-600 p-3 rounded-lg text-white mr-4">
                      <Mail className="w-6 h-6" />
                    </div>
                    <div>
                      <h3 className="text-lg font-semibold text-gray-900 mb-1">Email</h3>
                      <p className="text-gray-600">info@stroybrigada-shumerlya.ru</p>
                    </div>
                  </div>

                  <div className="flex items-start">
                    <div className="bg-gradient-to-br from-purple-500 to-purple-600 p-3 rounded-lg text-white mr-4">
                      <MapPin className="w-6 h-6" />
                    </div>
                    <div>
                      <h3 className="text-lg font-semibold text-gray-900 mb-1">–ê–¥—Ä–µ—Å</h3>
                      <p className="text-gray-600">–≥. –®—É–º–µ—Ä–ª—è, —É–ª. –ü—Ä–æ–º—ã—à–ª–µ–Ω–Ω–∞—è, –¥. 15</p>
                    </div>
                  </div>

                  <div className="flex items-start">
                    <div className="bg-gradient-to-br from-orange-500 to-orange-600 p-3 rounded-lg text-white mr-4">
                      <Clock className="w-6 h-6" />
                    </div>
                    <div>
                      <h3 className="text-lg font-semibold text-gray-900 mb-1">–†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã</h3>
                      <p className="text-gray-600">–ü–Ω-–ü—Ç: 9:00-18:00</p>
                      <p className="text-gray-600">–°–±: 10:00-16:00</p>
                      <p className="text-gray-600">–í—Å: –≤—ã—Ö–æ–¥–Ω–æ–π</p>
                    </div>
                  </div>
                </div>

                <div className="mt-8">
                  <h3 className="text-lg font-semibold text-gray-900 mb-4">–ù–∞—à–∏ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞</h3>
                  <div className="space-y-4">
                    <div className="flex items-start">
                      <CheckCircle className="w-5 h-5 text-green-500 mr-2 mt-1 flex-shrink-0" />
                      <p className="text-gray-600">–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –≤—ã–µ–∑–¥ –Ω–∞ –∑–∞–º–µ—Ä</p>
                    </div>
                    <div className="flex items-start">
                      <CheckCircle className="w-5 h-5 text-green-500 mr-2 mt-1 flex-shrink-0" />
                      <p className="text-gray-600">–ì–∞—Ä–∞–Ω—Ç–∏—è 10 –ª–µ—Ç –Ω–∞ –≤—Å–µ —Ä–∞–±–æ—Ç—ã</p>
                    </div>
                    <div className="flex items-start">
                      <CheckCircle className="w-5 h-5 text-green-500 mr-2 mt-1 flex-shrink-0" />
                      <p className="text-gray-600">–†–∞–±–æ—Ç–∞–µ–º –±–µ–∑ –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—ã</p>
                    </div>
                    <div className="flex items-start">
                      <CheckCircle className="w-5 h-5 text-green-500 mr-2 mt-1 flex-shrink-0" />
                      <p className="text-gray-600">–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –∑–∞–∫–∞–∑–∞ –≤—Å–µ–≥–æ {MIN_ORDER_AMOUNT} ‚ÇΩ</p>
                    </div>
                  </div>
                </div>
              </div>

              <div className={`${isDarkMode ? 'bg-gray-700' : 'bg-white'} rounded-2xl shadow-xl p-8 relative`}>
                <div className="absolute top-4 right-4 flex space-x-2">
                  <button
                    onClick={() => setIsCalculatorOpen(!isCalculatorOpen)}
                    className={`p-2 rounded-lg ${
                      isCalculatorOpen ? 'bg-blue-100 text-blue-600' : 'bg-gray-100 text-gray-600'
                    }`}
                  >
                    <Calculator className="w-5 h-5" />
                  </button>
                  <button
                    onClick={() => setIsAppointmentOpen(!isAppointmentOpen)}
                    className={`p-2 rounded-lg ${
                      isAppointmentOpen ? 'bg-blue-100 text-blue-600' : 'bg-gray-100 text-gray-600'
                    }`}
                  >
                    <Calendar className="w-5 h-5" />
                  </button>
                </div>
                
                <h3 className="text-2xl font-bold text-gray-900 mb-6 flex items-center">
                  <Heart className="mr-3 text-red-500" />
                  –û—Å—Ç–∞–≤—å—Ç–µ –∑–∞—è–≤–∫—É
                </h3>
                
                <AnimatePresence>
                  {isFormSubmitted ? (
                    <motion.div
                      initial={{ opacity: 0, scale: 0.8 }}
                      animate={{ opacity: 1, scale: 1 }}
                      exit={{ opacity: 0, scale: 0.8 }}
                      className="bg-green-50 border border-green-200 rounded-lg p-6 text-center"
                    >
                      <div className="text-green-500 mb-4">
                        <CheckCircle className="w-16 h-16 mx-auto" />
                      </div>
                      <h4 className="text-xl font-bold text-green-700 mb-2">–°–ø–∞—Å–∏–±–æ –∑–∞ –∑–∞—è–≤–∫—É!</h4>
                      <p className="text-green-600">–ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.</p>
                    </motion.div>
                  ) : (
                    <form onSubmit={handleSubmit} className="space-y-6">
                      <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                          <label className="block text-sm font-medium text-gray-700 mb-2">–ò–º—è</label>
                          <input
                            type="text"
                            name="name"
                            value={formData.name}
                            onChange={handleInputChange}
                            className={`w-full p-3 border ${isDarkMode ? 'bg-gray-800 border-gray-600' : 'bg-white border-gray-300'} rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent`}
                            placeholder="–í–∞—à–µ –∏–º—è"
                          />
                          {formErrors.name && (
                            <p className="text-red-500 text-xs mt-1">{formErrors.name}</p>
                          )}
                        </div>
                        
                        <div>
                          <label className="block text-sm font-medium text-gray-700 mb-2">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                          <input
                            type="tel"
                            name="phone"
                            value={formData.phone}
                            onChange={handleInputChange}
                            className={`w-full p-3 border ${isDarkMode ? 'bg-gray-800 border-gray-600' : 'bg-white border-gray-300'} rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent`}
                            placeholder="+7 (___) ___-__-__"
                          />
                          {formErrors.phone && (
                            <p className="text-red-500 text-xs mt-1">{formErrors.phone}</p>
                          )}
                        </div>
                      </div>
                      
                      <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                          <label className="block text-sm font-medium text-gray-700 mb-2">–£—Å–ª—É–≥–∞</label>
                          <select
                            name="service"
                            value={formData.service}
                            onChange={handleInputChange}
                            className={`w-full p-3 border ${isDarkMode ? 'bg-gray-800 border-gray-600' : 'bg-white border-gray-300'} rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent`}
                          >
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª—É–≥—É</option>
                            <option value="–∑–∞–±–æ—Ä">–ó–∞–±–æ—Ä</option>
                            <option value="–Ω–∞–≤–µ—Å">–ù–∞–≤–µ—Å</option>
                            <option value="—Ä–µ–º–æ–Ω—Ç">–†–µ–º–æ–Ω—Ç</option>
                            <option value="–ª–∞–Ω–¥—à–∞—Ñ—Ç">–õ–∞–Ω–¥—à–∞—Ñ—Ç–Ω—ã–π –¥–∏–∑–∞–π–Ω</option>
                          </select>
                          {formErrors.service && (
                            <p className="text-red-500 text-xs mt-1">{formErrors.service}</p>
                          )}
                        </div>
                        
                        <div>
                          <label className="block text-sm font-medium text-gray-700 mb-2">–¢–∏–ø –∑–∞–±–æ—Ä–∞</label>
                          <select
                            name="fenceType"
                            value={formData.fenceType}
                            onChange={handleInputChange}
                            className={`w-full p-3 border ${isDarkMode ? 'bg-gray-800 border-gray-600' : 'bg-white border-gray-300'} rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent`}
                          >
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø</option>
                            {Object.keys(FENCE_PRICES).map(type => (
                              <option key={type} value={type}>
                                {type.charAt(0).toUpperCase() + type.slice(1)} 
                                ({FENCE_PRICES[type]} ‚ÇΩ/–º)
                              </option>
                            ))}
                          </select>
                        </div>
                      </div>
                      
                      <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                          <label className="block text-sm font-medium text-gray-700 mb-2">–î–ª–∏–Ω–∞ –∑–∞–±–æ—Ä–∞ (–º)</label>
                          <input
                            type="number"
                            name="fenceLength"
                            value={formData.fenceLength}
                            onChange={handleInputChange}
                            className={`w-full p-3 border ${isDarkMode ? 'bg-gray-800 border-gray-600' : 'bg-white border-gray-300'} rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent`}
                            placeholder="–í–≤–µ–¥–∏—Ç–µ –¥–ª–∏–Ω—É"
                          />
                        </div>
                        
                        <div>
                          <label className="block text-sm font-medium text-gray-700 mb-2">–†–∞–∑–º–µ—Ä –Ω–∞–≤–µ—Å–∞</label>
                          <select
                            name="canopySize"
                            value={formData.canopySize}
                            onChange={handleInputChange}
                            className={`w-full p-3 border ${isDarkMode ? 'bg-gray-800 border-gray-600' : 'bg-white border-gray-300'} rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent`}
                          >
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑–º–µ—Ä</option>
                            <option value="–¥–æ 10 –º¬≤">–î–æ 10 –º¬≤ (15 000 ‚ÇΩ)</option>
                            <option value="10-20 –º¬≤">10-20 –º¬≤ (50 000 ‚ÇΩ)</option>
                            <option value="—Å–≤—ã—à–µ 20 –º¬≤">–°–≤—ã—à–µ 20 –º¬≤ (150 000 ‚ÇΩ)</option>
                          </select>
                        </div>
                      </div>
                      
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-2">–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ —É—á–∞—Å—Ç–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
                        <div className="flex items-center">
                          <label className="w-full">
                            <div className={`flex items-center justify-center w-full h-16 border-2 border-dashed rounded-lg cursor-pointer ${
                              isDarkMode ? 'border-gray-600 hover:border-gray-400' : 'border-gray-300 hover:border-gray-500'
                            }`}>
                              <div className="flex flex-col items-center justify-center">
                                <Image className="w-5 h-5 mb-1 text-gray-500" />
                                <p className="text-xs text-gray-500">
                                  {formData.sitePhoto ? formData.sitePhoto.name : '–ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ'}
                                </p>
                              </div>
                            </div>
                            <input
                              type="file"
                              className="hidden"
                              accept="image/*"
                              onChange={handleFileUpload}
                            />
                          </label>
                        </div>
                      </div>
                      
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-2">–°–æ–æ–±—â–µ–Ω–∏–µ</label>
                        <textarea
                          name="message"
                          value={formData.message}
                          onChange={handleInputChange}
                          rows={4}
                          className={`w-full p-3 border ${isDarkMode ? 'bg-gray-800 border-gray-600' : 'bg-white border-gray-300'} rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent`}
                          placeholder="–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ..."
                        ></textarea>
                        {formErrors.message && (
                          <p className="text-red-500 text-xs mt-1">{formErrors.message}</p>
                        )}
                      </div>
                      
                      <div className="bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4">
                        <div className="flex justify-between items-center">
                          <span className="text-lg font-bold text-blue-600">–ò—Ç–æ–≥–æ:</span>
                          <span className="text-2xl font-bold text-blue-600">
                            {calculatePrice() > 0 ? `${calculatePrice().toLocaleString()} ‚ÇΩ` : '‚Äî'}
                          </span>
                        </div>
                        {calculatePrice() > 0 && (
                          <p className="text-sm text-gray-600 mt-1">–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –∑–∞–∫–∞–∑–∞: {MIN_ORDER_AMOUNT} ‚ÇΩ</p>
                        )}
                      </div>
                      
                      <button
                        type="submit"
                        className="w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 px-6 rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-300 flex items-center justify-center"
                      >
                        <Send className="mr-2" />
                        –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É
                      </button>
                    </form>
                  )}
                </AnimatePresence>
                
                <div className="mt-8 text-center">
                  <p className="text-sm text-gray-500 mb-2">–ò–ª–∏ –Ω–∞–ø–∏—à–∏—Ç–µ –Ω–∞–º –≤ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞—Ö:</p>
                  <div className="flex justify-center space-x-4">
                    <a
                      href="https://wa.me/79373881435"
                      target="_blank"
                      rel="noopener noreferrer"
                      className="inline-flex items-center justify-center bg-green-500 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-600 transition-colors duration-300"
                    >
                      <span>WhatsApp</span>
                      <span className="ml-2">üí¨</span>
                    </a>
                    <a
                      href="https://t.me/stroybrigada_shumerlya"
                      target="_blank"
                      rel="noopener noreferrer"
                      className="inline-flex items-center justify-center bg-blue-500 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-600 transition-colors duration-300"
                    >
                      <span>Telegram</span>
                      <span className="ml-2">‚úàÔ∏è</span>
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
      )}

      {/* Chat Widget */}
      <div className="fixed bottom-6 right-6 z-50">
        <motion.div
          initial={{ opacity: 0, y: 50 }}
          animate={{ opacity: 1, y: 0 }}
          className="relative"
        >
          <button
            onClick={() => setIsChatOpen(!isChatOpen)}
            className="bg-blue-600 text-white w-16 h-16 rounded-full flex items-center justify-center shadow-xl hover:bg-blue-700 transition-colors duration-300"
          >
            <MessageCircle className="w-8 h-8" />
            {!isChatOpen && (
              <span className="absolute top-0 right-0 w-4 h-4 bg-red-500 rounded-full"></span>
            )}
          </button>
          
          {isChatOpen && (
            <motion.div
              initial={{ opacity: 0, scale: 0.9 }}
              animate={{ opacity: 1, scale: 1 }}
              className="absolute bottom-20 right-0 w-96 bg-white dark:bg-gray-800 rounded-xl shadow-2xl overflow-hidden"
            >
              <div className="p-4 bg-blue-600 text-white font-bold flex justify-between items-center">
                <span>–û–Ω–ª–∞–π–Ω-—á–∞—Ç</span>
                <button
                  onClick={() => setIsChatOpen(false)}
                  className="text-white hover:text-gray-200"
                >
                  <X className="w-5 h-5" />
                </button>
              </div>
              
              <div className="h-80 overflow-y-auto p-4 space-y-4">
                {chatMessages.map((message, index) => (
                  <div
                    key={index}
                    className={`flex ${message.sender === 'user' ? 'justify-end' : 'justify-start'}`}
                  >
                    <div
                      className={`max-w-3/4 p-3 rounded-lg ${
                        message.sender === 'user'
                          ? 'bg-blue-100 dark:bg-blue-900/30 rounded-br-none'
                          : 'bg-gray-100 dark:bg-gray-700 rounded-bl-none'
                      }`}
                    >
                      {message.text}
                    </div>
                  </div>
                ))}
                
                {isChatTyping && (
                  <div className="flex justify-start">
                    <div className="bg-gray-100 dark:bg-gray-700 p-3 rounded-lg rounded-bl-none">
                      <div className="flex space-x-1">
                        <div className="w-2 h-2 bg-gray-500 rounded-full animate-bounce" style={{ animationDelay: '0ms' }}></div>
                        <div className="w-2 h-2 bg-gray-500 rounded-full animate-bounce" style={{ animationDelay: '150ms' }}></div>
                        <div className="w-2 h-2 bg-gray-500 rounded-full animate-bounce" style={{ animationDelay: '300ms' }}></div>
                      </div>
                    </div>
                  </div>
                )}
              </div>
              
              <div className="p-3 border-t border-gray-200 dark:border-gray-700">
                <div className="flex">
                  <button
                    onClick={toggleVoiceAssistant}
                    className={`p-2 rounded-l-lg ${
                      isVoiceActive 
                        ? 'bg-red-500 text-white' 
                        : 'bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300'
                    }`}
                  >
                    {isVoiceActive ? <Mic className="w-5 h-5" /> : <MicOff className="w-5 h-5" />}
                  </button>
                  <input
                    type="text"
                    value={newMessage}
                    onChange={(e) => setNewMessage(e.target.value)}
                    onKeyPress={(e) => e.key === 'Enter' && handleSendMessage()}
                    placeholder={isVoiceActive ? "–ì–æ–≤–æ—Ä–∏—Ç–µ..." : "–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..."}
                    className="flex-1 p-2 border rounded-r-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600"
                    disabled={isVoiceActive}
                  />
                  <button
                    onClick={handleSendMessage}
                    className="bg-blue-600 text-white p-2 rounded-r-lg hover:bg-blue-700 transition-colors duration-300"
                  >
                    <Send className="w-5 h-5" />
                  </button>
                </div>
                {voiceTranscript && (
                  <p className="text-xs text-gray-500 mt-1">–†–∞—Å–ø–æ–∑–Ω–∞–Ω–æ: {voiceTranscript}</p>
                )}
              </div>
            </motion.div>
          )}
        </motion.div>
      </div>

      {/* Footer */}
      <footer className={`${isDarkMode ? 'bg-gray-900' : 'bg-gray-900'} text-white py-12`}>
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="grid grid-cols-1 md:grid-cols-4 gap-8">
            <div>
              <div className="flex items-center mb-4">
                <div className="bg-blue-600 p-2 rounded-lg">
                  <Building className="w-6 h-6 text-white" />
                </div>
                <span className="ml-3 text-xl font-bold">–°—Ç—Ä–æ–π–ë—Ä–∏–≥–∞–¥–∞</span>
              </div>
              <p className="text-gray-400">
                –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ –∑–∞–±–æ—Ä–æ–≤, –Ω–∞–≤–µ—Å–æ–≤ –∏ –æ–≥—Ä–∞–∂–¥–µ–Ω–∏–π –≤ –®—É–º–µ—Ä–ª–µ
              </p>
            </div>
            
            <div>
              <h4 className="text-lg font-semibold mb-4">–£—Å–ª—É–≥–∏</h4>
              <ul className="space-y-2 text-gray-400">
                <li>–ó–∞–±–æ—Ä—ã</li>
                <li>–ù–∞–≤–µ—Å—ã</li>
                <li>–û–≥—Ä–∞–∂–¥–µ–Ω–∏—è</li>
                <li>–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤–æ—Ä–æ—Ç</li>
                <li>–†–µ–º–æ–Ω—Ç –∑–∞–±–æ—Ä–æ–≤</li>
              </ul>
            </div>
            
            <div>
              <h4 className="text-lg font-semibold mb-4">–ö–æ–Ω—Ç–∞–∫—Ç—ã</h4>
              <ul className="space-y-2 text-gray-400">
                <li>+79956364056</li>
                <li>+7 (937) 388-1435</li>
                <li>info@stroybrigada-shumerlya.ru</li>
                <li>–≥. –®—É–º–µ—Ä–ª—è</li>
              </ul>
            </div>
            
            <div>
              <h4 className="text-lg font-semibold mb-4">–°–≤—è–∑–∞—Ç—å—Å—è</h4>
              <div className="flex space-x-4">
                <a href="https://wa.me/79373881435" target="_blank" rel="noopener noreferrer" className="text-gray-400 hover:text-white transition-colors duration-300">
                  <span className="text-green-500">WhatsApp</span>
                </a>
                <a href="https://t.me/stroybrigada_shumerlya" target="_blank" rel="noopener noreferrer" className="text-gray-400 hover:text-white transition-colors duration-300">
                  <span className="text-blue-500">Telegram</span>
                </a>
              </div>
            </div>
          </div>
          
          <div className="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
            <p>&copy; 2024 –°—Ç—Ä–æ–π–ë—Ä–∏–≥–∞–¥–∞. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
            <p className="mt-2 text-sm">–°–∞–π—Ç-–°—É–ø–µ—Ä–º–µ–Ω: –±—ã—Å—Ç—Ä–æ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã –∏ —Å—Ç—Ä–æ–∏—Ç —Å–µ—Ç–∏ –∑–∞–±–æ—Ä–æ–≤ –∑–∞ —Å–µ–∫—É–Ω–¥—ã!</p>
          </div>
        </div>
      </footer>

      {/* Back to top button */}
      <button
        onClick={() => window.scrollTo({ top: 0, behavior: 'smooth' })}
        className={`fixed bottom-6 left-6 z-50 bg-blue-600 text-white w-12 h-12 rounded-full flex items-center justify-center shadow-xl hover:bg-blue-700 transition-colors duration-300 ${
          isDarkMode ? 'opacity-70 hover:opacity-100' : 'opacity-50 hover:opacity-100'
        }`}
      >
        <ArrowUp className="w-6 h-6" />
      </button>
    </div>
  );
};

export default App;
